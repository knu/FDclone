.\"
.\" Copyright (c) 1995-2002 Takashi SHIRAI
.\"                    <shirai@nintendo.co.jp>
.\"
.\" @(#)fd.1   2.01b 07/10/02
.\"   fd - File & Directory maintenance tool
.TH FD 1 "July 10, 2002"
.de sh
.br
.PP
\fB\\$1\fR
.PP
..
.SH 名称
fd \- ファイル・ディレクトリ管理ツール
.SH 形式
.B fd
[
.B \-abCefhikmnrstuvx
] [
.BI \- NAME = value
] [
.I directory
]
.br
.B fdsh
[
.B \-abCcefhikmnrstuvx
] [
.I args
]
.SH 解説
.B fd
は、
UNIX 汎用のテキスト端末用に考えられた、
ファイルやディレクトリの管理ツールです。
PC/AT 互換機と PC-98x1 専用に作られている同名ユーティリティのクローンを目指しています。
実際、機能的には上位互換となっています。

.B fd
を起動すると、ファイル一覧のブラウザ画面になりますので、
各コマンドを割当ててある各種キーの入力により、
様々な機能を実行することができます。

(以下の記述で
.B " (U)"
とある機能については、UNIX 版のみの実装で、
MS-DOS 版では機能しません。
同様に
.B " (D)"
とある機能については MS-DOS 版のみの実装です。)
.SS オプション
コマンドラインオプションは、
内蔵シェル用の機能設定と、
後述の内部変数の設定に使用します。
内部変数には任意の変数名が使用できますが、
.B fd
が解釈するものは後述の
.B 環境変数
の項目で挙げられているものに限ります。
.I directory
を指定すると、
起動直後にカレントディレクトリをそのディレクトリに移動します。

内蔵シェル用に使えるオプションには下記のものがあります。
.TP
.BI \-c " string"
.I string
で示されるコマンドを実行し、
終了します。
.B fdsh
として起動された時のみ有効です。
.TP
.B \-i
.B \-i
を指定するか、
もしくは標準入出力が端末である場合には、
シェルが対話型シェルになります。
.TP
.B \-s
.B \-s
を指定するか、
もしくは
.I " args"
を指定しない場合は、
シェルのコマンド入力を標準入力から読込みます。
以降の引数は位置パラメータとなります。
.TP
.B \-r
シェルの機能が一部制限されます。
具体的には以下の動作が禁止されます。
.RS 10
.PD 0
.PP
カレントディレクトリの移動
.br
.B $PATH
及び
.B " $SHELL"
の設定変更
.br
.B /
を含むコマンドの実行
.br
出力のリダイレクト
.RB ( >
及び
.BR " >>" )
.ta 1.5i 3i
.nf
.ft B
IN_DIR	OUT_DIR	LOG_TOP
LOG_DIR	ATTR_FILE	COPY_FILE
MOVE_FILE	DELETE_FILE	DELETE_DIR
RENAME_FILE	MAKE_DIR	WRITE_DIR
TREE_DIR	BACKUP_TAPE	EDIT_FILE
UNPACK_FILE	PACK_FILE	LOG_TREE
COPY_TREE	MOVE_TREE	UNPACK_TREE
FIND_DIR
.ft R
.fi
.PD
.RE
.RS
.B rfd
または
.B " rfdsh"
として起動された場合には、
自動的にこの一部制限シェルになります。
.RE

この他、
後述の
.B " set"
組込みコマンドで述べられているオプションが有効です。
.SS 画面レイアウト
.B fd
の画面モードは、
大きく 3 つのモードに分けられます。
ブラウザ画面では、ファイルの一覧リストの中をブラウジングして、
各コマンドを実行していきます。
アーカイブブラウザ画面では、
アーカイブファイル内のファイルを、ディレクトリ階層別に一覧表示し、
ブラウザ画面と同様にブラウジングします。
ツリー表示画面では、ディレクトリの階層構造がツリー表示された中を、
移動してディレクトリパスを選択します。

どの画面モードでも、画面全体の上下各
.B " 3"
行ずつは、
.B fd
の様々な情報を表示するために用いられます。
画面上端情報については、
.B 4
行の場合もあります。
その画面レイアウトは、おおよそ次のようになっています。
.IP 行数 10
意味
.IP \fB1\fP
タイトル行。
右端の時計は
.B " 10"
秒毎に更新されます。
.IP \fB2\fP
インフォメーション行。
表示ページ (及び全ページ数)、マーク数 (及び全ファイル数)、
ソート形式、ファイル検索文字列の順で情報が書かれます。
.IP \fB3\fP
パス行。
カレントディレクトリのフルパスが表示されます。
また、アーカイブブラウザ画面では、
アーカイブファイルのフルパスと、アーカイブ内パスが表示されます。
.IP "\fB2\fP (随意)"
ファイルサイズ情報行。
ディレクトリ内のマークファイルの
トータルサイズ (及び全ファイルのトータルサイズ)、
カレントディレクトリのあるファイルシステムの総容量、
及び空き容量が表示されます。
後述の環境変数
.B SIZEINFO
の設定を事前に行なっておくことによりこの行が表示されます。
この行が表示されている場合、
インフォメーション行とパス行は
それぞれ 1 行ずつ繰り下げて表示されます。
.IP "\fB最下 \- 2\fP"
スタック行。
ファイルの並び替えを行なう際、
一時的にスタックに積んだファイルがここに表示されます。
.IP "\fB最下 \- 1\fP"
ファンクション行。
ファンクションキーの機能が表示されます。
.IP "\fB最下\fP"
ステイタス行。
カーソル位置のファイルに関するステイタスが表示されます。
また、コマンド実行の上で何らかの支障が生じた場合の
ウォーニングメッセージもここに表示されます。
.SS 内部コマンド
.B fd
では以下の各内部コマンドが使用できます。
これらの内部コマンドのキー割当てはユーザにより変更可能ですが、
ここではデフォルトのキー割当てを添えます。
識別子は、
.B EXECUTE_SH
コマンド内でコマンドラインから実行する場合や、
キー割当てをユーザ定義する場合に用います。

.br
.ta 2i 5i
.nf
識別子	意味	キー

\fBCUR_UP\fP	カーソルを上に移動	\fB↑\fP
\fBCUR_DOWN\fP	カーソルを下に移動	\fB↓\fP
\fBCUR_RIGHT\fP	カーソルを右に移動	\fB→\fP
\fBCUR_LEFT\fP	カーソルを左に移動	\fB←\fP
\fBROLL_UP\fP	次の表示ページに切替え	\fBPageDown\fP
\fBROLL_DOWN\fP	前の表示ページに切替え	\fBPageUp\fP
\fBCUR_TOP\fP	カーソルを先頭に移動	\fBBeg\fP(<)
\fBCUR_BOTTOM\fP	カーソルを最後尾に移動	\fBEol\fP(>)
\fBFNAME_RIGHT\fP	ファイル名表示範囲を右シフト	\fB(\fP
\fBFNAME_LEFT\fP	ファイル名表示範囲を左シフト	\fB)\fP
\fBONE_COLUMN\fP	画面表示を 1 列にする	\fB1\fP
\fBTWO_COLUMNS\fP	画面表示を 2 列にする	\fB2\fP
\fBTHREE_COLUMNS\fP	画面表示を 3 列にする	\fB3\fP
\fBFIVE_COLUMNS\fP	画面表示を 5 列にする	\fB5\fP
\fBMARK_FILE\fP	ファイルのマーク	\fBTab\fP
\fBMARK_FILE2\fP	ファイルのマークと下移動	\fBSpace\fP
\fBMARK_FILE3\fP	ファイルのマークと画面内移動	\fB^Space\fP(^@)
\fBMARK_ALL\fP	全ファイルにマーク	\fBHome\fP(+)
\fBMARK_REVERSE\fP	全ファイルをマーク反転	\fBEnd\fP(-)
\fBMARK_FIND\fP	検索したファイルにマーク	\fB\(**\fP
\fBIN_DIR\fP	サブディレクトリに移動	\fBReturn\fP
\fBOUT_DIR\fP	親ディレクトリに移動	\fBBs\fP
\fBLOG_TOP\fP	ルートディレクトリに移動	\fB\e\fP
\fBREREAD_DIR\fP	表示画面の再描画	\fB^L\fP
\fBPUSH_FILE\fP	ファイルをスタックに積む	\fBDel\fP(])
\fBPOP_FILE\fP	ファイルをスタックから取出す	\fBIns\fP([)
\fBLOG_DIR\fP	ディレクトリの絶対移動	\fBF1\fP(l)
\fBEXECUTE_FILE\fP	ファイルの実行	\fBF2\fP(x)
\fBCOPY_FILE\fP	ファイルのコピー	\fBF3\fP(c)
\fBDELETE_FILE\fP	ファイルの削除	\fBF4\fP(d)
\fBRENAME_FILE\fP	ファイル名の変更	\fBF5\fP(r)
\fBSORT_DIR\fP	ファイルのソート	\fBF6\fP(s)
\fBFIND_FILE\fP	ファイルの検索	\fBF7\fP(f)
\fBTREE_DIR\fP	ディレクトリのツリー表示	\fBF8\fP(t)
\fBEDIT_FILE\fP	ファイルの編集	\fBF9\fP(e)
\fBUNPACK_FILE\fP	アーカイブファイルの伸長	\fBF10\fP(u)
\fBATTR_FILE\fP	ファイル属性の変更	\fBF11\fP(a)
\fBINFO_FILESYS\fP	ファイルシステムの情報表示	\fBF12\fP(i)
\fBMOVE_FILE\fP	ファイルの移動	\fBF13\fP(m)
\fBDELETE_DIR\fP	ディレクトリの削除	\fBF14\fP(D)
\fBMAKE_DIR\fP	ディレクトリの作成	\fBF15\fP(k)
\fBEXECUTE_SH\fP	子プロセスの実行	\fBF16\fP(h)
\fBWRITE_DIR\fP	表示ディレクトリの書込み	\fBF17\fP(w)
\fBBACKUP_TAPE\fP	テープへのバックアップ	\fBF18\fP(b)
\fBVIEW_FILE\fP	ファイルの閲覧	\fBF19\fP(v)
\fBPACK_FILE\fP	ファイルの圧縮	\fBF20\fP(p)
\fBLOG_TREE\fP	ツリー選択でディレクトリ移動	\fBL\fP
\fBCOPY_TREE\fP	ツリー選択でファイルコピー	\fBC\fP
\fBMOVE_TREE\fP	ツリー選択でファイル移動	\fBM\fP
\fBUNPACK_TREE\fP	ツリー選択でファイル伸長	\fBU\fP
\fBFIND_DIR\fP	ディレクトリの検索移動	\fBF\fP
\fBSYMLINK_MODE\fP	symbolic リンク表示形式の切替	\fBS\fP
\fBFILETYPE_MODE\fP	ファイルタイプシンボルの切替	\fBT\fP
\fBDOTFILE_MODE\fP	ドットファイル非表示の切替	\fBH\fP
\fBFILEFLG_MODE\fP	ファイルフラグ表示の切替	\fBO\fP
\fBLAUNCH_FILE\fP	ランチャの起動	\fBReturn\fP
\fBSEARCH_FORW\fP	ファイル名の前方検索	\fB^S\fP
\fBSEARCH_BACK\fP	ファイル名の後方検索	\fB^R\fP
\fBSPLIT_WINDOW\fP	ウィンドウの分割	\fB/\fP
\fBNEXT_WINDOW\fP	ウィンドウ間の移動	\fB^\fP
\fBEDIT_CONFIG\fP	カスタマイザの起動	\fBE\fP
\fBHELP_MESSAGE\fP	ヘルプ画面の表示	\fB?\fP
\fBQUIT_SYSTEM\fP	fd の終了	\fBEsc\fP(q)

\fBWARNING_BELL\fP	ベルを鳴らします
\fBNO_OPERATION\fP	何もしません
.fi
.PP
最後の 2 つの内部コマンドは、
キー割当てを変更してデフォルトで割当てられた機能を殺したい時に使います。
.SS 内部コマンド解説
各内部コマンドの詳細を以下で説明します。
同様な機能を持つ内部コマンドは、
幾つかまとめて説明しています。
.RS 3
.IP "\fBカーソル移動\fP" 5
カーソルを移動します。
.IP "\fB表示ページ切替え\fP"
表示が一画面に収まらなかった場合に、
前後のページに移動します。
カーソル移動でページの外に移動しようとした場合にも、
ページ切替えになります。
.IP "\fB先頭, 最後尾への移動\fP"
カーソルをファイル一覧の先頭及び最後尾に移動します。
表示が一画面に収まらない場合は、ページの切替えも行なわれます。
.IP "\fBファイル名表示範囲の変更\fP"
ファイル名表示が規定のカラム内に収まらなかった場合、
カーソル位置のファイル名のみ、表示される部分を変更していくことができます。
それぞれ、一文字ずつ右と左にシフトさせて表示します。
ステイタス行の表示も同時にシフトされます。
.IP "\fB画面表示列の変更\fP"
通常は一画面
.B " 2"
列の表示になっていますが、
この列の数をそれぞれの値に変更します。
列の数により、1 ファイル当たりのカラム数が変わるので、
表示されているファイル情報も変化します。
.IP "\fBファイルのマーク\fP"
カーソル位置のファイルにマークをします。
ディレクトリにはマークできません。
.RB [ Space ]
の場合にはマークと同時にカーソルを下移動します。
.RB [ ^Space ]
の場合にも下移動しますがページ切替えはしません。
また、
.RB [ Home ]
で全ファイルにマークを、
.RB [ End ]
で全ファイルのマークを反転します。
.RB [ \(** ]
では、
ワイルドカードにマッチしたファイルにマークを追加します。
ワイルドカード文字列は
.RB " [" \(** ]
を押した後でその都度入力します。

マークしたファイルは、
.BR ATTR_FILE ,
.BR COPY_FILE ,
.BR DELETE_FILE ,
.BR MOVE_FILE ,
.B UNPACK_FILE
及びユーザ定義のコマンドマクロ実行の際に対象となります。
.IP "\fBカレントディレクトリの移動\fP"
移動したいサブディレクトリのところにカーソルを移動し、
.RB [ Return ]
を押すと、そのディレクトリに移動します。
親ディレクトリへは、".\|." のファイルにカーソル移動して
.RB " [" Return ]
を押すか、
もしくは
.RB " [" Bs ]
を押すことで移動できます。
また、
.RB [ \e ]
でルートディレクトリへの絶対移動を行ないます。
.IP "\fBファイルスタックへの積み下ろし\fP"
.RB [ Del ]
を押すと、そのカーソル位置のファイルが一旦スタックに積まれ、
ファイル一覧の画面から一時的に削除されます。
スタックには
.B " 5"
ファイルまで積むことができます。

スタックに積まれたファイルは、
.RB [ Ins ]
でそのカーソル位置に挿入することができます。
最後にスタックに積んだファイルから順に取り出されます。
但し、この並びは
.B " fd"
の中で便宜上そう見えているだけで、
ディレクトリの移動等を行なえば元の並びに戻ります。
.IP "\fB表示画面の再描画\fP"
カレントディレクトリの情報を再度読み出し、
ファイル一覧の画面を再描画します。
起動中に他のプロセスからファイルの追加削除を行なった場合や、
何らかの理由により画面表示が乱れた場合などに有効です。

また、画面サイズの変更に際して
.B " SIGWINCH"
シグナルを発生しないような端末の場合 (HP-UXの
.BR " kterm" (1)
など) は、
画面サイズを変更した後には明示的に再描画させる必要があります。
.IP "\fBディレクトリの絶対移動\fP (Logdir)"
入力したパス名に、カレントディレクトリを移動します。
\'/' で始まるパス名を入力すれば、相対移動でなく絶対移動になります。

パス名として "\fB.\fP" を入力すると、
カレントディレクトリのパス名を絶対表記に改めます。
これ以外の移動では、リンク等の原因により、
カレントディレクトリは常に仮想的なパス名を示します。
また、"\fB?\fP" というパス名を入力すると、
.B fd
を起動した直前のカレントディレクトリに移動できます。
"\fB-\fP" というパス名を入力すると、
最後に訪れたディレクトリに移動できます。

また、フロッピードライブに移動している時に "\fB@\fP" というパス名を入力すると、
フロッピードライブに移動する前の UNIX ファイルシステム
側のディレクトリに移動できます。
.B (U)
.IP "\fBファイルの実行\fP (eXec)"
カーソル位置のファイル名に、
パラメータを追加して子プロセスとして実行します。
編集ラインのカーソル位置は、
実行権のあるファイルではファイル名の後に、
それ以外のファイルではファイル名の前に来ます。
それぞれ、適当なパラメータやコマンド名を補って下さい。
また、カーソルキーの上下で過去に実行したコマンド履歴の参照もできます。

MS-DOS 版では、
編集ライン中で引用符 \fB"\fP で括られた LFN 形式のファイル名は、
自動的に 8+3 形式のファイル名に置き換えられてから実行されます。
この時、\fB"\fP で括られた文字列で表されるファイル名が存在する時には全て、
\fB"\fP を削除した上で 8+3 形式のファイル名に変換しますが、
そのファイル名が存在しない場合は、
\fB"\fP を含めて変換を行ないません。
.IP "\fBファイルのコピー\fP (Copy)"
カーソル位置のファイルを指定のディレクトリにコピーします。
カーソル位置がディレクトリだった場合には、
ディレクトリの中を再帰的にコピーできます。
マークされたファイルがある場合は、
カーソル位置のファイルではなくマークファイルが対象となります。

また、コピー先に同名ファイルが存在した場合、
「日付の新しいファイルを上書き」
「名前を変えてコピー」
「全て上書き」
「同名ファイルはコピーしない」
「転送」
の中から処理を選択できます。
「転送」を選択すると転送先のディレクトリを聞いてきますので指定して下さい。
コピー先の同名ファイルは全てここで指定したディレクトリに移動します。
.IP "\fBファイルの削除\fP (Delete)"
カーソル位置のファイルを削除します。
ディレクトリは削除できません。
マークされたファイルがある場合は、
カーソル位置のファイルではなくマークファイルが対象となります。

書込み権のないファイルの場合には、安全のため確認を取ります。
.IP "\fBファイル名の変更\fP (Rename)"
カーソル位置のファイルのファイル名を変更します。
既に存在するファイルと同じ名前には変更できません。
また、新しいファイル名としてディレクトリ付きのパス名を指定すると、
ファイル移動も同時に行なわれることになります。
.IP "\fBファイルのソート\fP (Sort)"
カレントディレクトリ内のファイルをソートして表示します。
ソートのタイプは
「名前順」「拡張子順」「サイズ順」「日付順」「長さ順」の中から選び、
更に「昇べき」「降べき」を指定します。
ソート前のソートタイプが「ソートしない」以外だった時は、
選択肢の中に「ソートしない」も含まれるようになります。
また、一度ソートした後に別のタイプでソートすると、
以前のソート結果を基準にしてソートし直します。
なお、このソートには指定したタイプ以外に優先順位があり、
「ソートしない」以外のソートタイプでは、
ディレクトリファイルは通常ファイルよりも常に先んじて並べられます。
また、「長さ順」ではファイル名長が同じもの同士は名前順で並べます。

但し、このソートは
.B " fd"
の中で便宜上そう見えているだけで、
ディレクトリの移動等を行なえば元の並びに戻ります。
.IP "\fBファイルの検索\fP (Find)"
ワイルドカードにマッチしたファイルだけを画面に表示するようにします。
先頭が '.' で始まるファイル名は、
\'\(**' や '?' で始まるワイルドカードにマッチしません。
検索表示を解除したい場合は、ディレクトリを移動するか、
再度
.B " FIND_FILE"
を実行して空行を入力して下さい。

また、カレントディレクトリに、
アーカイブブラウザの登録されている拡張子のファイルが存在した場合、
検索文字列の先頭を '/' で始めると、
ファイル名そのものの検索ではなく、アーカイブファイル内のファイル名を検索し、
マッチしたファイルを持つアーカイブファイルのみ画面に表示します。
この機能はアーカイブブラウザ内でも利用できます。

なお、検索表示中は
.B " WRITE_DIR"
は実行できません。
.IP "\fBディレクトリのツリー表示\fP (Tree)"
カレントディレクトリを基準としたツリー構造を表示します。
ツリー表示モード内で移動したい先のディレクトリを選択すると、
カレントディレクトリを移動します。
.IP "\fBファイルの編集\fP (Editor)"
カーソル位置のファイルを編集します。
編集に用いるエディタは、内部変数
.B " EDITOR"
を参照して用いますが、
内部変数が未定義の場合には環境変数
.B " EDITOR"
を参照します。
.IP "\fBアーカイブファイルの伸長\fP (Unpack)"
カーソル位置のアーカイブファイルを指定ディレクトリ先に伸長します。
デフォルトでは、tar ファイルとその圧縮ファイル及び LHa 圧縮ファイルしか
伸長できませんが、初期設定ファイルに記述することで、
これ以外のアーカイバにも対応できるようになります。
.IP "\fBファイル属性の変更\fP (Attr)"
カーソル位置のファイルの、
ファイルアクセスモードとタイムスタンプを変更します。
マークされたファイルがある場合は、
カーソル位置のファイルではなくマークファイルが対象となります。
マークファイルの場合は、
モードかタイムスタンプかのどちらかを選んでから、
入力したものを一括変更することになります。

モードの入力は、カーソルキーで変更したい位置へカーソルを移動し、
.RB [ Space ]
でその位置の属性を反転させます。
実行ビットの属性は、2 値のトグルではなく、
それぞれ setuid ビット、setgid ビット、
sticky ビットを含んだ 3 値のトグルになっていますので注意して下さい。
タイムスタンプの入力は、変更したい位置にカーソルを持っていって、
数値を入力するだけです。
最終的に、
.RB [ Return ]
を押した時点で実行されます。
中断する場合は
.RB " [" Esc ]
です。
日付の範囲チェックは完全ではありませんので気をつけて下さい。

なお、
.RB [ a ](Attr),
.RB [ d ](Date),
.RB [ t ](Time)
を入力すると、
各々の入力ラインの先頭位置にカーソル移動します。

また、ファイルフラグ属性のある OS では、
モードの変更と同様にファイルフラグも変更できます。
但し、変更できるフラグの値は実行ユーザの権限に準じます。
.IP "\fBファイルシステムの情報表示\fP (Info)"
指定されたファイルシステムの情報を表示します。
入力されたパスがファイルシステムを表すスペシャルファイルでなかった場合は、
そのパスを含むファイルシステムの情報を示します。
.IP "\fBファイルの移動\fP (Move)"
カーソル位置のファイルを指定のディレクトリに移動します。
カーソル位置がディレクトリだった場合には、
ディレクトリそのものを移動します。
マークされたファイルがある場合は、
カーソル位置のファイルではなくマークファイルが対象となります。

移動先に同名ファイルが存在した場合、
.B COPY_FILE
同様、処理の選択ができます。
また、移動先が異なるファイルシステムの場合は、
単にコピーと削除を連続して実行します。
.IP "\fBディレクトリの削除\fP (rmDir)"
カーソル位置のディレクトリファイルを、
再帰的に削除します。
但し、ディレクトリが symbolic リンクの場合には、
リンクの削除のみ行ない、リンク先のディレクトリには影響を与えません。
.IP "\fBディレクトリの作成\fP (mKdir)"
カレントディレクトリの下にサブディレクトリを作成します。
入力したサブディレクトリ文字列に、
パス名デリミタである '/' が含まれていた場合、
最終的にその文字列で示されるディレクトリが作成されるまで、
再帰的にディレクトリ作成を繰り返します。

\'/' で始まるパス名を入力すれば、
カレントディレクトリ下でなく、
表される絶対パスにディレクトリを作成します。
.IP "\fB子プロセスの実行\fP (sHell)"
入力されたコマンド文字列を内蔵シェルに渡して子プロセスとして実行させます。
.B EXECUTE_FILE
と同様にコマンド履歴の参照や MS-DOS 版での LFN 自動変換もできます。
また、何も入力せずに
.RB " [" Return ]
のみ入力すると、
内部変数もしくは環境変数
.B " SHELL"
の指すユーザシェルを起動します。
この場合、
.B fd
に戻るためには "\fBexit\fP" と入力して下さい。
また、
.B SHELL
の値が
.B " fdsh"
の場合には、
内蔵シェルを対話型シェルとして起動します。

但し、組込みコマンド及び内部コマンドに同じコマンド名があった場合、
外部コマンドに優先して組込みコマンド及び内部コマンドが実行されます。
組込みコマンドの詳細は、
`\fB組込みコマンド\fP' の項を参照して下さい。
.IP "\fB表示ディレクトリの書込み\fP (Write)"
現在表示されているディレクトリの書込みをします。
ディレクトリエントリ上のファイル間の隙間も詰めて書込まれます。
.BR PUSH_FILE ,
.B POP_FILE
や
.B " SORT_DIR"
で並び替えた後であれば、その結果を書込むことになります。

表示ディレクトリがホームディレクトリ下の階層に属していなかった場合、
安全のため、他のユーザが利用していないかどうかの確認を求めます。
セキュリティ上不安定なので、
NFS マウントされたディレクトリや一部の特殊ディレクトリ上では書込みできません。

また、ファイルの並び替えをするような内部コマンド実行後に、
その並びを崩してしまう内部コマンドを実行しようとすると、
その内部コマンド実行の直前に、
書込みを行なうかどうかを問い合わせしてきます。
この機能のため、
明示的にこの書込みコマンドを実行しなくても
ディレクトリの書込みを行なうことがあります。
但し、表示ディレクトリがホームディレクトリ下になかった場合は、
この問い合わせを行ないません。
.IP "\fBテープへのバックアップ\fP (Backup)"
カーソル位置のファイルを指定デバイスの記録装置にバックアップします。
カーソル位置がディレクトリだった場合には、
その中身を全て保存します。
マークされたファイルがある場合は、
カーソル位置のファイルではなくマークファイルが対象となります。

バックアップには
.BR " tar" (1)
を用います。
デバイス名の入力の際に、デバイスを示すスペシャルファイル以外を与えた場合、
そのファイル名でアーカイブファイルを作成します。
.IP "\fBファイルの閲覧\fP (View)"
カーソル位置のファイルを閲覧します。
閲覧に用いるページャは、
内部変数
.B " PAGER"
を参照して用いますが、
内部変数が未定義の場合には環境変数
.B " PAGER"
を参照します。
.IP "\fBファイルの圧縮\fP (Pack)"
カーソル位置のファイルを指定のアーカイブファイルに圧縮します。
カーソル位置がディレクトリだった場合には、
その中身を全てアーカイブファイルに入れます。
マークされたファイルがある場合は、
カーソル位置のファイルではなくマークファイルが対象となります。

入力したアーカイブファイルの拡張子を見て、
それぞれに応じたアーカイバを自動的に選択します。
デフォルトでは、
tar ファイルとその圧縮ファイル及び LHa 圧縮ファイルにしか圧縮できませんが、
初期設定ファイルに記述することで、
これ以外のアーカイバにも対応できるようになります。

但し、
.BR tar (1)
を用いる場合は、
一度に渡せるパラメータ長の限界のせいで、
たくさんのファイルを一度に圧縮することができない場合があります。
そのような場合は、
.B BACKUP_TAPE
を用いてアーカイブファイルを作成して下さい。
.IP "\fBツリーを用いたファイル操作\fP"
.RB [ L ],
.RB [ C ],
.RB [ M ],
.RB [ U ]
を押すと、
パス名の入力の際に、
文字列を入力する代わりにツリー構造の中から選択させることができます。
それぞれ、
.BR LOG_DIR ,
.BR COPY_FILE ,
.BR MOVE_FILE ,
.B UNPACK_FILE
と同等の機能の内部コマンドが実行されます。
.IP "\fBファイルの検索移動\fP"
ワイルドカードにマッチするファイルを、
カレントディレクトリから下に階層的に検索し、
見つかったファイルのあるディレクトリに移動します。
カーソル位置がディレクトリだった場合は、
カレントディレクトリでなく、カーソル位置のディレクトリの下を検索します。

マッチした個々のファイルに対し、
そこに移動するかどうかを確認してきますので、
目的のファイルが表示されるまでは
.RB " [" n ](No)
を選択して下さい。
.IP "\fBランチャの起動\fP"
サブディレクトリ以外のカーソル位置で
.RB " [" Return ]
を押すと、
それぞれのファイル拡張子に応じた動作をします。
デフォルトでは、
tar ファイルとその圧縮ファイル及び LHa 圧縮ファイルに対し、
アーカイブブラウザが登録されています。
初期設定ファイルに記述することで、
これ以外のコマンドもランチャとして登録することができます。

カーソル位置が未登録の拡張子のファイルだった場合は、
.B VIEW_FILE
と同じ挙動を示します。
アーカイブブラウザ画面でも、
登録ランチャは有効に機能し、
再帰的にアーカイブブラウザを起動することも可能です。
.IP "\fBsymbolic リンク表示形式の切替え\fP"
ファイル表示欄やステイタス行に表示されるファイル情報は、
symbolic リンクファイルの場合には、
リンク先の本体ではなくリンクファイルのものになっています。
これを、トグルスイッチでリンク先本体の情報を参照するように切替えます。
.B (U)

リンク本体情報参照モードでは、
ファンクション行の左端に
.RB " '" S "'(Symbolic Link)"
と表示されます。
.IP "\fBファイルタイプシンボル表示の切替え\fP"
.BR ls (1)
の -F オプションでの表示と同様に、
ファイル一覧リストのファイル名の欄に、
そのファイルのタイプを表すシンボル文字を付加して表示します。
トグルスイッチでシンボルの表示非表示を切替えます。
各シンボルの意味は以下のとおり。
.RS 10
.ta 0.5i
.nf
\fB/\fP	ディレクトリ
\fB@\fP	シンボリックリンク
\fB\(**\fP	実行可能ファイル
\fB=\fP	ソケット
\fB\(bv\fP	FIFO
.fi
.RE

.RS 10
(MS-DOS 版及びフロッピードライブ)
.ta 0.5i
.nf
\fB/\fP	ディレクトリ
\fB\(**\fP	実行可能ファイル
\fB=\fP	システムファイル
\fB\(bv\fP	ラベル
.fi
.RE

.RS
ファイルタイプ表示モードでは、
ファンクション行の左端に
.RB " '" T '(Type)
と表示されます。
.RE
.IP "\fBドットファイル表示非表示の切替え\fP"
\'.' で始まるファイル名のファイルを、
ファイル一覧内に表示しないようにします。
トグルスイッチでドットファイルの表示非表示を切替えます。

ドットファイル非表示モードでは、
ファンクション行の左端に
.RB " '" H '(Hidden)
と表示されます。
.IP "\fBファイルフラグ表示の切替え\fP"
各ファイルのファイルモードの代わりに、
一部の OS にあるファイルフラグを表示します。
トグルスイッチでファイルフラグの表示とファイルモードの表示を切替えます。
ファイルフラグのない OS では機能しません。
各シンボルの意味は順に以下のとおり。
.B (U)
.RS 10
.ta 0.5i
.nf
\fBA\fP	Archived
\fBN\fP	Nodump
\fBa\fP	system Append-only
\fBc\fP	system unChangable (immutable)
\fBu\fP	system Undeletable
\fBa\fP	user Append-only
\fBc\fP	user unChangable (immutable)
\fBu\fP	user Undeletable
.fi
.RE

.RS
ファイルフラグ表示モードでは、
ファンクション行の左端に
.RB " '" F '(Flags)
と表示されます。
.RE
.IP "\fBファイル名の検索\fP"
カレントディレクトリ内でファイル名をインクリメンタルサーチし、
カーソルを移動していきます。
コマンドを実行するとサーチモードに移行し、
ファンクション行にプロンプトが現れますので、
ここで検索したいファイル名をキー入力していくと、
その時点で入力されている文字列にマッチするファイル名に
カーソルが順次移動していきます。
.RB [ Esc ]
で通常モードに復帰できます。
.IP "\fBウィンドウの分割\fP"
画面を分割して使うウィンドウ分割モードと、
通常のウィンドウ非分割モードとの切替えを行ないます。
ウィンドウ分割モードでは、
画面を縦方向に二分割し
それぞれのウィンドウ内で独立して作業を行なうことができます。
.IP "\fBウィンドウ間の移動\fP"
ウィンドウ分割モードの時にウィンドウ間の移動を行ないます。
ウィンドウ非分割モードでは意味を持ちません。
.IP "\fBカスタマイザの起動\fP"
内部変数や組込みコマンドで設定する内容を、
対話的に変更するカスタマイザを起動します。
ここで設定した内容は即座に反映されますが、
初期設定ファイルに反映させるには、
カスタマイザ内で明示的に書込みを実行する必要があります。
.IP "\fBヘルプ画面の表示\fP"
現在のキー割当てとそのコマンド内容を一覧表示します。
一画面に収まりきらない場合は一画面分の表示で一旦キー入力を待ちます。

また、バイナリ頒布の実行ファイルでは、
この画面のファンクション行に頒布責任者の連絡先が表示されますので、
何かあった場合にはこちらの連絡先にご一報下さい。
.IP "\fBfdの終了\fP (Quit)"
.B fd
を終了します。
.RE
.SS コマンド
.B EXECUTE_SH
や初期設定ファイルの中では、
外部コマンド以外に上述の内部コマンドや後述の組込みコマンドが使用できます。
これらのコマンドについては、
一つ以上のコマンドを
.B " \(bv"
または
.B " \(bv\|&"
で区切ってパイプラインを構成することができます。
.B \(bv
の前段のコマンドの標準出力は後段のコマンドの標準入力に渡されます。
.B \(bv\|&
の場合は、
前段のコマンドの標準出力と標準エラー出力の両方が後段のコマンドの標準入力に渡されます。
パイプラインの終了ステータスは最後段コマンドの終了ステータスになりますが、
パイプラインの先頭を
.B " !"
で始めることで、
パイプラインの終了ステータスを最後段コマンドの終了ステータスの論理否定にすることができます。
また、
一つ以上のパイプラインを
.BR " ;" ,
.BR & ,
.BR &\|\(bv ,
.BR &\|& ,
.B \(bv\|\(bv
で区切ってコマンドリストを構成することができます。
コマンドリストは
.B " ;"
や
.B " &"
または
.B " &\|\(bv"
で終わっていても構いません。
これらの区切り子は各々以下のような意味を持ちます。
.RS 3
.PD 0
.IP "\fB;\fP" 5
前段のパイプラインから順に実行します。
.IP "\fB&\fP"
前段のパイプラインの終了を待たずに後段のパイプラインを同時に実行します。
.B (U)
.IP "\fB&\|\(bv\fP"
最初から
.B " disown"
されていることを除いて
.B " &"
と同じです。
.B (U)
.IP "\fB&\|&\fP"
前段のパイプラインを実行し、
その終了ステータスが
.B " 0"
ならば後段のパイプラインを実行します。
.IP "\fB\(bv\|\(bv\fP"
前段のパイプラインを実行し、
その終了ステータスが
.B " 0"
でなければ後段のパイプラインを実行します。
.PD
.RE
コマンドリストの中では、
改行文字は
.B " ;"
と同じ意味を持ちます。

また、
コマンドリスト中の各々のコマンドは、
以下のリダイレクト記述子により入出力を切替えることが出来ます。
リダイレクト記述子は、
コマンド文字列の中のどの位置にあっても構いません。
.RS 3
.PD 0
.IP "\fIn\fR\fB<\fP\fIfile\fR" 10
ファイルディスクリプタ
.I " n"
で表される入力をファイル
.I " file"
からの入力に切替えます。
.I n
を省略すると、
標準入力を指定したものと見なされます。
.IP "\fIn\fR\fB>\fP\fIfile\fR"
ファイルディスクリプタ
.I " n"
で表される出力をファイル
.I " file"
への出力に切替えます。
.I n
を省略すると、
標準出力を指定したものと見なされます。
ファイル
.I " file"
が存在しない場合は新たに生成され、
存在する場合はファイルサイズ 0 に切詰められてから出力されます。
.IP "\fIn\fR\fB>\|\(bv\fP\fIfile\fR"
組込みコマンド
.B " set"
により
.B " \-C"
オプションが設定されている場合でも、
強制的に既存ファイルに上書きするという点を除けば、
.B \>
と全く同等です。
.IP "\fIn\fR\fB>\|>\fP\fIfile\fR"
ファイルディスクリプタ
.I " n"
で表される出力をファイル
.I " file"
への出力に切替えます。
.I n
を省略すると、
標準出力を指定したものと見なされます。
ファイル
.I " file"
が存在しない場合は新たに生成され、
存在する場合はその後ろに追加されます。
.IP "\fIn1\fR\fB<\|&\fP\fIn2\fR"
ファイルディスクリプタ
.I " n1"
で表される入力をファイルディスクリプタ
.I " n2"
で表される入力に切替えます。
.I n1
を省略すると、
標準入力を指定したものと見なされます。
.IP "\fIn1\fR\fB>\|&\fP\fIn2\fR"
ファイルディスクリプタ
.I " n1"
で表される出力をファイルディスクリプタ
.I " n2"
で表される出力に切替えます。
.I n1
を省略すると、
標準出力を指定したものと見なされます。
.IP "\fB&\|>\fP\fIfile\fR"
標準出力と標準エラー出力の両方を同時にファイル
.I " file"
への出力に切替えます。
ファイル
.I " file"
が存在しない場合は新たに生成され、
存在する場合はファイルサイズ 0 に切詰められてから出力されます。
.IP "\fB&\|>\|\(bv\fP\fIfile\fR"
組込みコマンド
.B " set"
により
.B " \-C"
オプションが設定されている場合でも、
強制的に既存ファイルに上書きするという点を除けば、
.B &\|>
と全く同等です。
.IP "\fB&\|>\|>\fP\fIfile\fR"
標準出力と標準エラー出力の両方を同時にファイル
.I " file"
への出力に切替えます。
ファイル
.I " file"
が存在しない場合は新たに生成され、
存在する場合はその後ろに追加されます。
.IP "\fIn\fR\fB<\|>\fP\fIfile\fR"
.IP "\fIn\fR\fB>\|<\fP\fIfile\fR"
ファイルディスクリプタ
.I " n"
で表される入出力をともにファイル
.I " file"
の入出力に切替えます。
.I n
を省略すると、
標準入力を指定したものと見なされます。
.IP "\fIn\fR\fB<\|-\fP"
.IP "\fIn\fR\fB<\|&\|-\fP"
ファイルディスクリプタ
.I " n"
で表される入力を閉じます。
.I n
を省略すると、
標準入力を指定したものと見なされます。
.IP "\fIn\fR\fB>\|-\fP"
.IP "\fIn\fR\fB>\|&\|-\fP"
ファイルディスクリプタ
.I " n"
で表される出力を閉じます。
.I n
を省略すると、
標準出力を指定したものと見なされます。
.IP "\fIn\fR\fB<\|<\fP[\fB\-\fP]\fIword\fR"
ファイルディスクリプタ
.I " n"
で表される入力を、
文字列
.I " word"
と同じ文字列から成る入力行が現れるか、
もしくはファイルの終端までの部分の入力に切替えます。
.I word
にクォートで囲まれた部分がある場合は入力行を評価しません。
そうでなければ各入力行は評価され、
変数展開や文字列置換が行なわれます。
.B \-
が指定された場合、
入力行の先頭にあるタブを全て削除してからコマンドに渡します。
.I n
を省略すると、
標準入力を指定したものと見なされます。
.PD
.RE

なお、
各コマンド入力行においては、
.RB ' # '
から行末まで、
及び空行は無視されます。
行の最後尾が
.RB " '" \e '
で終っている場合は、
その行の記述が次行にも継続しているとみなしますので、
一行が長くなるような場合はこれで分割できます。
.SS 組込みコマンド
.B fd
では以下の組込みコマンドが用意されています。
これらの組込みコマンドは、
.B EXECUTE_SH
や初期設定ファイルの中で用いることができます。
.IP "\fBif\fP \fIlist\fR \fBthen\fP [\fBelif\fP \fIlist\fR \fBthen\fP \fIlist\fR] .\|.\|. [\fBelse\fP \fIlist\fR] \fBfi\fP" 14
.B if
節及び
.B " elif"
節の
.I " list"
が先頭から順に実行され、
その終了ステータスが
.B " 0"
ならば対応する
.B " then"
節の
.I " list"
が実行され、
その時点で後続の
.B " elif"
節は無視されます。
もしどの
.B " if"
節や
.B " elif"
節の
.I " list"
も
.B " 0"
で終了しなかった場合、
.B " else"
節の
.I " list"
が実行されます。
どの
.B " then"
節や
.B " else"
節の
.I " list"
も実行されなかった場合は、
.B if
は終了ステータス
.B " 0"
を返します。
.IP "\fBwhile\fP \fIlist\fR \fBdo\fP \fIlist\fR \fBdone\fP"
.B while
節の
.I " list"
が繰返し実行され、
その終了ステータスが
.B " 0"
である間ずっと
.B " do"
節の
.I " list"
が繰返し実行されます。
.B do
節の
.I " list"
が一度も実行されなかった場合は、
.B while
は終了ステータス
.B " 0"
を返します。
.IP "\fBuntil\fP \fIlist\fR \fBdo\fP \fIlist\fR \fBdone\fP"
.B until
節の
.I " list"
が繰返し実行され、
その終了ステータスが
.B " 0"
でない間ずっと
.B " do"
節の
.I " list"
が繰返し実行されます。
.B do
節の
.I " list"
が一度も実行されなかった場合は、
.B until
は終了ステータス
.B " 0"
を返します。
.IP "\fBfor\fP \fINAME\fR [\fBin\fP \fIvalue\fR .\|.\|.] \fBdo\fP \fIlist\fR \fBdone\fP"
.I value
リストの値を一つずつ順に内部変数
.I " NAME"
に代入し、
そのそれぞれについてコマンドリスト
.I " list"
を実行します。
.B in
.I value
を省略すると、
位置パラメータを順に代入します。
.IP "\fBcase\fP \fIword\fR \fBin\fP [\fIpattern\fR [\fB\(bv\fP \fIpattern\fR] .\|.\|. \fB)\fP \fIlist\fR \fB;;\fP] .\|.\|. \fBesac\fP"
文字列
.I " word"
と各パターン
.I " pattern"
とを比較し、
最初にマッチした
.I " pattern"
に対応するコマンドリスト
.I " list"
を実行します。
.IP "\fB(\fP\fIlist\fR\fB)\fP"
サブシェル内で
.I " list"
を実行します。
.IP "\fB{\fP \fIlist\fR\fB;\fP \fB}\fP"
現行シェル内で
.I " list"
を実行します。
.IP "\fINAME\fR\fB=\fP[\fIvalue\fR] [\fIcom\fR .\|.\|.]"
.B fd
内でのみ有効の内部変数の定義を行ないます。
内部変数
.I " NAME"
に値(文字列)
.I value
を代入します。
変数定義に続いてコマンド
.I " com"
を記述すると、
この変数を環境変数として渡した状態で
.I " com"
を実行します。
この場合、
.I NAME
の定義は環境変数としても内部変数としても残りません。

.I value
を省略すると、内部変数
.I " NAME"
の値としてナルを定義します。
内部変数の定義を削除する場合には
.B " unset"
を用いて下さい。
.IP "\fIname\fR\fB()\fP \fB{\fP \fIlist\fR; \fB}\fP"
コマンドリスト
.I " list"
を関数
.I " name"
として定義します。
定義された関数は、
.B EXECUTE_SH
の入力ラインのほか、
後述の各コマンドマクロ内に用いることができます。
各コマンド記述内では位置パラメータ
.BI " $" n
が記述可能で、
これは、関数呼出時の引数を指しています。
.B $0
が
.I " name"
そのもので、
.BR $1 \- $9
までが引数を指します。

.B { }
や
.I " list"
は省略できませんが、
.I list
が単文からなる場合は前後の
.B " { }"
を省略しても構いません。
関数定義を削除する場合には
.B " unset"
を用いて下さい。
.IP "\fB!\fP\fInum\fR"
数値
.I " num"
で表される履歴番号のコマンドを実行します。
.I num
が負数だった場合は、現在の履歴番号から相対的に数えて
.I " num"
番目の履歴番号のコマンドを実行します。
.IP "\fB!!\fP"
直前のコマンドを実行します。
.B !\-1
と同義です。
.IP "\fB!\fP\fIstr\fR"
文字列
.I " str"
で始まる行のコマンド履歴を実行します。
.IP "\fB:\fP [\fIarg\fR .\|.\|.]"
何もしません。
但し、
.I arg
の評価やリダイレクトの実行は行なわれます。
.IP "\fB.\fP \fIfile\fR"
.PD 0
.IP "\fBsource\fP \fIfile\fR"
.PD
ファイル
.I " file"
を読み込んで評価します。
.I file
は
.B PATH
に含まれるディレクトリにあるか、
もしくはパス名付表記でなくてはいけません。
ファイルの各行の書式は
.B " EXECUTE_SH"
コマンドの書式に準拠します。
ファイル内で入れ子にしてファイルを読み込ませることもできます。
.IP "\fBalias\fP [\fIname\fR[\fB=\fP\fIcom\fR]]"
コマンド
.I " com"
の別名として
.I " name"
をエイリアス定義します。
定義されたエイリアスは、
.B EXECUTE_SH
の入力ラインのほか、
後述の各コマンドマクロ内に用いることができます。
エイリアスによる置換は再帰的に行なわれます。

.I com
を省略すると、
.I name
のエイリアスを表示します。
.I com
も
.I " name"
も省略すると、現在定義されている全てのエイリアスを一覧表示します。
.IP "\fBarch\fP \fIext\fR [\fIpack unpack\fR]"
拡張子
.I " ext"
のアーカイブファイルに対するアーカイバコマンドを登録します。
.I pack
には圧縮時のコマンドを、
.I unpack
には伸長時のコマンドを、
それぞれ \fB"\fP で括ったマクロ表記で記述します。
.I ext
の先頭を
.B " /"
で始めると、
拡張子の比較の際に大文字小文字の違いを無視して比較します。

.IR pack ,
.I unpack
共に省略すると、拡張子
.I " ext"
に対するアーカイバコマンド登録を削除します。
.IP "\fBbg\fP [\fIjob\fR]"
.I job
で表されるジョブの実行をバックグラウンドで再開します。
ジョブを指定するには下記の書式が有効です。
.B (U)
.RS 20
.ta 0.5i
.nf
\fB%\fP
\fB%+\fP	カレントジョブ
\fB%-\fP	一つ前のジョブ
\fB%\fP\fIn\fR	ジョブ番号 \fIn\fR のジョブ
\fB%\fP\fIstr\fR	コマンドラインが \fIstr\fR で始まるジョブ
.fi
.RE
.RS
但し、
後述のパラメータマクロ機能のために、
.B EXECUTE_SH
のコマンドライン入力ではこれらの
.B " %"
の部分は
.B " %%"
と重ねて記述する必要があります。

.I job
を省略するとカレントジョブをバックグラウンドで再開します。
.RE
.IP "\fBbind\fP \fIc\fR [\fIcom1\fR [\fIcom2\fR] [\fB:\fP\fIcomment\fR]]"
キー
.I " c"
に対して、コマンド
.I " com1"
を割当てます。
.I c
にコントロール文字を指定したい場合は、
.B ^
を冠して ^A のように 2 文字で記述します。
Meta キー (MS-DOS 版では Alt キー) を併用する文字を指定したい場合は、
.B @
を冠して @a のように 2 文字で記述します。
ファンクションキーや機能キーを指定したい場合は、
後述の
.B " keymap"
コマンドで用いられている各識別子を用い、
F10 のように文字列で記述します。
また、
.B \en
=0x0a や
.B " \ee"
=0x1b といったエスケープ文字列、8 進数を用いた
.B " \eooo"
といった表記もできます。

.B fd
の持つ内部コマンドの割当ては、コマンド識別子をそのまま記述できます。
引数付きで内部コマンドを定義したい場合や、
コマンドをマクロ表記で定義する場合は、
\fB"\fP で括った文字列を記述します。
.I com2
を省略せずに記述すると、
カーソル位置がディレクトリだった場合に
.I " com2"
の方を実行します。
キー
.I " c"
が F1 から F10 のファンクションキーの場合、
コマンドの記述に続いて
.B " :"
を冠して
.I " comment"
を記述すると、
ファンクション行の該当部分の表示を
.I " comment"
に変更できます。

但し、コントロール文字に対するキー割当てについては、
後述の編集モードの設定が優先しますので気をつけて下さい。

.IR com1 ,
.I com2
共に省略すると、
キー
.I " c"
に対するキー割当て登録を削除します。
.IP "\fBbreak\fP [\fIn\fR]"
ループから抜けます。
.B for
などのステートメント中で用います。
.I n
が指定されていると
.I " n"
段階分ループから抜けます。
.IP "\fBcd\fP [\fIdir\fR]"
.B fd
内のカレントディレクトリを
.I " dir"
に移動します。
.I dir
を省略すると内部変数
.B " HOME"
で示されるディレクトリに移動します。
キーマクロとして "cd $HOME" などと定義しておくと便利でしょう。
パス名として "\fB.\fP", "\fB?\fP", "\fB-\fP", "\fB@\fP" を指定すると、
.B LOG_DIR
と同様の挙動が得られます。
.IP "\fBchdir\fP [\fIdir\fR]"
.B cd
と同等です。
.B (D)
.IP "\fBcheckid\fP [\fIfile\fR .\|.\|.]"
RFC1321 の MD5 アルゴリズムに従って、
指定されたファイルの一意な ID を計算し表示します。
複数の
.I " file"
を指定すると指定された全ファイルについて ID を表示します。
一つも指定しなかった場合は、
実行中の
.B " fd"
自身の ID を表示します。

安全性の保証されたアルゴリズムなので、
ファイルの同一性を確認する手段として有効です。
.IP "\fBcls\fP"
画面を消去します。
.B (D)
.IP "\fBcommand\fP [\fB\-p\fP | \fB\-v\fP | \fB\-V\fP] \fIarg\fR .\|.\|."
単純なコマンドとして
.I " arg"
を実行します。
.I arg
と同名の関数定義があった場合でも、
関数は実行されません。
.B \-p
が指定されると、
現在の
.B " PATH"
の値の代わりに既定値を用いてパス検索します。
.B \-v
が指定されると、
.I arg
を実行する代わりに
.I " arg"
の絶対パスを表示します。
この時、
.I arg
が内部コマンドであれば単にその名前を表示します。
.B \-V
が指定されると
.B " type"
と同様に
.I " arg"
に関する詳細説明を表示します。
.IP "\fBcontinue\fP \fIn\fR"
ループの中で次の繰返しを開始します。
.B for
などのステートメント中で用います。
.I n
が指定されていると
.I " n"
- 1 段階上層のループの中で次の繰返しを開始します。
.IP "\fBcopy\fP [\fB/ABVY\-Y\fP] \fIsrc\fR [\fB/AB\fP] [\fB\+\fP \fIsrc2\fR [\fB/AB\fP] [\fB\+\fP .\|.\|.]] [\fIdest\fR [\fB/AB\fP]]"
.I src
で示されるファイルを
.I " dest"
で示されるファイルまたはディレクトリにコピーします。
.I dest
がディレクトリを表している時にはコピー先のファイル名は
.I " src"
になります。
.I dest
を省略するとカレントディレクトリにコピーされます。
コピー元のファイルは
.B " \+"
で区切るかワイルドカードを用いるかで複数指定できます。
.B \+
で区切った場合はそれらのファイルを連結してコピーします。
ワイルドカードを用いた場合は、
コピー先がディレクトリなら一つずつコピーし、
コピー先がファイルなら連結してコピーします。
.B (D)

.B /A
を指定すると ASCII テキストファイルとして扱います。
.B /B
を指定するとバイナリファイルとして扱います。
.B /V
を指定するとコピーの正否を照合します。
.B /Y
を指定するとコピー先の上書き確認のキー入力待ちをしません。
.B /\-Y
を指定するとコピー先の上書き確認のキー入力待ちをします。
.IP "\fBdel\fP [\fB/P\fP] \fIfile\fR"
.PD 0
.IP "\fBerase\fP [\fB/P\fP] \fIfile\fR"
.PD
.I file
で示されるファイルを削除します。
ファイルはワイルドカードを用いて複数指定できます。
.B (D)

.B /P
を指定すると削除する前に確認のキー入力待ちをします。
.IP "\fBdir\fP [\fB/PWSBLV\fP] [\fB/A\fP[\fBDRHSA\-\fP]] [\fB/O\fP[\fBNSEDGA\-\fP]] [\fIdir\fR]"
.I dir
で表されるディレクトリ中のファイルとサブディレクトリを一覧表示します。
.I dir
省略時にはカレントディレクトリの情報を表示します。
.B (D)

.B /P
を指定すると一画面毎にキー入力待ちになります。
.B /W
を指定するとワイド一覧形式で表示します。
.B /A
を指定するとその後続文字で表される属性のファイルのみ表示します。
.RS 20
.ta 0.3i 2i 2.3i
.nf
\fBD\fP	ディレクトリ	\fBR\fP	読取り専用
\fBH\fP	隠しファイル	\fBS\fP	システムファイル
\fBA\fP	アーカイブ	\fB-\fP	その属性以外
.fi
.RE
.RS
.B /O
を指定するとその後続文字で表されるソート形式でソートします。
.RE
.RS 20
.ta 0.3i 2i 2.3i
.nf
\fBN\fP	名前順	\fBS\fP	サイズ順
\fBE\fP	拡張子順	\fBD\fP	日付順
\fBG\fP	ディレクトリ優先	\fBA\fP	最終アクセス順
\fB-\fP	逆順
.fi
.RE
.RS
.B /L
を指定すると小文字で表示します。
.B /V
を指定すると詳細情報を表示します。
.RE
.IP "\fBdisown\fP [\fIjob\fR]"
.I job
で表されるジョブをシェルの管理下から外します。
.B disown
されたジョブは、
組込みコマンド
.B " jobs"
や
.BR " fg" ,
.B bg
で制御できなくなります。
ログインシェルとして起動された時には、
.B disown
されていないジョブはシェル終了時に強制終了されます。
.B (U)

.I job
を省略するとカレントジョブをシェルの管理化から外します。
.IP "\fBecho\fP [\fB\-n\fP] [\fIarg\fR .\|.\|.]"
.I arg
を標準出力に出力します。
.B \-n
が指定されない場合は
.I " arg"
の最後に改行を出力します。
.BR echo (1)
を参照して下さい。
.IP "\fBeval\fP [\fIarg\fR .\|.\|.]"
.I arg
を評価した後実行します。
.IP "\fBevalmacro\fP [\fIarg\fR .\|.\|.]"
.I arg
に含まれるパラメータマクロを評価した後実行します。
.B eval
はパラメータマクロを評価しませんので、
用途に応じて適宜使い分けて下さい。
また、
関数の中ではパラメータマクロが使えないので、
パラメータマクロの展開にはこのコマンドが必要になります。
.IP "\fBexec\fP [\fIcom\fR [\fIarg .\|.\|.\fR]]"
.B fd
の実行を
.I " com"
に置換えて実行を続けます。
.I com
の引数として
.I " arg"
を指定できます。
.IP "\fBexit\fP [\fIn\fR]"
.B fd
を終了します。
.I n
が指定されていると終了ステータス
.I " n"
で終了します。
.IP "\fBexport\fP [\fINAME\fR[\fB=\fP[\fIvalue\fR]] .\|.\|.]"
内部変数
.I " NAME"
を環境変数として子プロセスに継承させるようにします。
以降、
.I NAME
への定義は全て子プロセスでも参照されるようになります。
値が未定義の内部変数を
.B " export"
した場合は、
その内部変数に値が定義された時点で初めて環境変数となります。
値の定義も同時に行ないたい場合は、
.I value
を指定して下さい。

.B =
のみ記述して
.I " value"
を省略すると、環境変数
.I " NAME"
の値としてナルを定義します。
引数なしで実行された場合は、
現在
.B " export"
されている環境変数の一覧を表示します。
環境変数の定義を削除する場合には
.B " unset"
を用いて下さい。
.IP "\fBfalse\fP"
終了ステータス
.B " 1"
を返すだけで何もしません。
.IP "\fBfc\fP [\fB-l\fP | \fB-s\fP [\fIold\fR\fB=\fP\fInew\fR .\|.\|.]] [\fB-nr\fP] [\fB-e\fP \fIeditor\fR] [\fIfirst\fR [\fIlast\fR]]"
コマンド履歴を表示したり編集したりします。
.I first
及び
.I " last"
でコマンド履歴の範囲を選択します。
範囲指定には数値もしくは文字列が使用できます。
正の数値は履歴番号を示し、
負の数値は現在の履歴番号から相対的に数えた番号のコマンド履歴を示します。
文字列で指定すると、
その文字列で始まる行のコマンド履歴を示します。
.B \-n
が指定されるとコマンド履歴一覧に履歴番号を付けません。
.B \-r
が指定されるとコマンド履歴一覧が逆順になります。
.B \-e
が指定されるとコマンド履歴編集に使うエディタを
.I " editor"
に指定します。
未指定時には内部変数
.B " FCEDIT"
または
.B " EDITOR"
で指定されたエディタコマンドが用いられます。

.B \-l
が指定されると標準出力に指定された範囲のコマンド履歴を一覧表示します。
この時、
.I last
を省略すると現在の履歴番号が指定されたものと見なし、
更に
.I " first"
も省略すると
.B " -16"
が指定されたものと見なします。

.B \-s
が指定されると
.I " first"
で指定されたコマンド履歴を即時実行します。
この時、
.I first
を省略すると現在の履歴番号が指定されたものと見なします。
指定されたコマンド履歴の文字列中に
.I " old"
という文字列が存在した場合は、
実行前にその部分を
.I " new"
という文字列に置換えてから実行します。

.B \-l
も
.B " \-s"
も指定されなかった場合は、
指定された範囲のコマンド履歴を編集し、
編集を終えると編集されたコマンドが標準出力に表示されながら逐次実行されます。
この時、
.I last
を省略すると
.I " first"
を指定されたものと見なし、
更に
.I " first"
も省略すると共に現在の履歴番号が指定されたものと見なします。
.IP "\fBfd\fP [\fIdirectory\fR]"
内蔵シェルから
.B " fd"
を起動します。
.I directory
を指定すると、
起動直後にカレントディレクトリをそのディレクトリに移動します。
.B QUIT_SYSTEM
により内蔵シェルに戻ります。
.B fdsh
として起動された時のみ有効です。
.IP "\fBfg\fP [\fIjob\fR]"
.I job
で表されるジョブの実行をフォアグラウンドで再開します。
ジョブを指定するには下記の書式が有効です。
.B (U)
.RS 20
.ta 0.5i
.nf
\fB%\fP
\fB%+\fP	カレントジョブ
\fB%-\fP	一つ前のジョブ
\fB%\fP\fIn\fR	ジョブ番号 \fIn\fR のジョブ
\fB%\fP\fIstr\fR	コマンドラインが \fIstr\fR で始まるジョブ
.fi
.RE
.RS
但し、
後述のパラメータマクロ機能のために、
.B EXECUTE_SH
のコマンドライン入力ではこれらの
.B " %"
の部分は
.B " %%"
と重ねて記述する必要があります。

.I job
を省略するとカレントジョブをフォアグラウンドで再開します。
.RE
.IP "\fBgetkey\fP [\fInum\fR]"
押下したキーに対するキーコード文字列を取得します。
コマンド実行後にキー入力待ちになりますので、
検査したいキーを押すと、
そのキーに対するキーコード文字列を表示します。
.I num
回キーを押下すると終了です。
.I num
が
.B " 2"
回以上の場合は、
.RB [ Space ]
を押しても終了させることができます。
.I num
が
.B " 0"
回の場合には
.RB " [" Space ]
が押されるまで無限に繰り返されます。
ここで表示される文字列は、
そのまま
.B " keymap"
コマンドのキーコード文字列として使用可能です。
.B (U)

.I num
を省略すると、
.B 1
回を指定したものと見なします。
.IP "\fBgetopts\fP \fIoptstr\fR \fINAME\fR [\fIarg .\|.\|.\fR]"
.I arg
の並びからオプションパラメータを展開するのに用いられます。
オプションとして有効な文字は
.I " optstr"
に列挙された文字だけです。
あるオプション文字が引数を取る場合は、
.I optstr
の記述の中でその文字の後ろに
.B " :"
を続けます。
.B getopts
が呼出される度に、
.I arg
の並びから展開された新しいオプション文字が内部変数
.I " NAME"
に代入されます。
引数を持つオプション文字の場合は、
その引数が内部変数
.B " OPTARG"
に代入されます。
また、
次に展開するパラメータの位置がその都度内部変数
.B " OPTIND"
に代入されます。
.B OPTIND
の値は起動時に
.B " 1"
に初期化されますが、
別のオプションパラメータ展開を行なう際には、
予め手動で
.B " OPTIND"
の値を
.B " 1"
に初期化しておく必要があります。
.I arg
を省略すると、
位置パラメータをオプションパラメータに展開します。

オプションの終端に達した場合は、
.B getopts
は
.B " 1"
を返します。
この時、
.I NAME
には
.B " ?"
が代入されます。
.I optstr
に含まれないオプション文字が見つかった場合は、
標準エラー出力にエラーメッセージを表示し、
.I NAME
に
.B " ?"
を代入し
.B " OPTARG"
を
.B " unset"
します。
但し、
.I optstr
が
.B " :"
で始まっていると、
エラーメッセージは表示せずに、
代わりに見つかったオプション文字を
.B " OPTARG"
に代入します。
引数を要するオプション文字に引数が伴わなかった場合は、
標準エラー出力にエラーメッセージを表示し、
.I NAME
に
.B " ?"
を代入し
.B " OPTARG"
を
.B " unset"
します。
但し、
.I optstr
が
.B " :"
で始まっていると、
エラーメッセージは表示せずに、
代わりに見つかったオプション文字を
.B " OPTARG"
に代入し
.I " NAME"
に
.B " :"
を代入します。
.IP "\fBhash\fP [\fB\-r\fP \(bv \fIcom\fR .\|.\|.]"
外部コマンド実行時の検索パス
.B " PATH"
を参照して
.I " com"
に対する絶対パスを検索し、
その結果をハッシュテーブルに登録します。

.I com
の代わりに
.B " \-r"
を指定するとこれまで記憶していたハッシュテーブルを全て破棄します。
.I com
を省略するとハッシュテーブル情報の一覧を表示します。
.BR hits ,
.BR cost ,
.B command
は、
それぞれそのコマンドの実行された回数、
検索パス上で検索するのに要した仕事量、
コマンドの絶対パスを表します。
検索されたコマンドが相対ディレクトリにあった場合は、
絶対パスとして登録されませんので、
カレントディレクトリを移動する度に再検索する必要があります。
このようなコマンドでは、
.B hits
の値に続いて
.B " \(**"
が表示されます。
.IP "\fBhistory\fP [\fIn\fR]"
最近の
.I " n"
個のコマンド履歴を、
履歴番号を添えて一覧表示します。

.I n
を省略すると、
現在記憶されている全てのコマンド履歴を一覧表示します。
.IP "\fBjobs\fP"
実行中のジョブを一覧表示します。
.B (U)
.IP "\fBkconv\fP [\fB\-i\fP \fIin\fR] [\fB\-o\fP \fIout\fR] [\fIinfile\fR [\fIoutfile\fR]]"
.I infile
を読込み、
漢字コードを
.I " in"
から
.I " out"
に変換して
.I " outfile"
に出力します。
.I in
及び
.I " out"
には後述の環境変数
.B " FNAMEKCODE"
に用いる文字列が指定できます。
省略すると、
コンパイル時に指定された漢字コードが指定されたと見なされます。
.I outfile
を省略すると、
標準出力に出力します。
.I infile
も省略すると、
標準入力から読込みます。
.B (U)
.IP "\fBkeymap\fP [\fIc\fR [\fIstr\fR]]"
各種機能キー
.I " c"
のキーコードとして
.I " str"
の文字列をマッピングします。
.I c
には以下の識別子のみ使用可能です。
.B (U)
.RS 20
.ta 0.9i 2i 2.9i
.nf
\fBUP\fP	↑	\fBDOWN\fP	↓
\fBRIGHT\fP	→	\fBLEFT\fP	←
\fBBEG\fP	Begin	\fBEOL\fP	Eol
\fBHOME\fP	Home	\fBEND\fP	End
\fBINS\fP	Insert	\fBDEL\fP	Delete
\fBINSLIN\fP	InsLine	\fBDELLIN\fP	DelLine
\fBPPAGE\fP	PageUp	\fBNPAGE\fP	PageDown
\fBENTER\fP	Enter	\fBBS\fP	Bs
\fBCLR\fP	Clear	\fBHELP\fP	Help
\fBPLUS\fP	+ (tenkey)	\fBMINUS\fP	- (tenkey)
\fBASTER\fP	\(** (tenkey)	\fBSLASH\fP	/ (tenkey)
\fBCOMMA\fP	, (tenkey)	\fBDOT\fP	. (tenkey)
\fBEQUAL\fP	= (tenkey)	\fBRET\fP	Return (tenkey)
\fBTK0\fP.\|.\fBTK9\fP	0-9 (tenkey)
\fBF1\fP.\|.\|.\fBF20\fP	ファンクションキー
.fi
.RE

.RS
キーコード文字列内では、
.B \en
=0x0a や
.B " \ee"
=0x1b といったエスケープ文字列が使用可能です。
8 進数を用いた
.B " \eooo"
といった表記もできます。
また、
.B ^
を冠して ^A のようにコントロール文字を記述することもできます。
.B ^
自身は
.B " \e^"
と記述します。

.I str
を省略すると、
.I c
に対するキーコード文字列を表示します。
.I str
も
.I " c"
も省略すると、現在特殊キーに割当てられている全てのマッピングを一覧表示します。
.I str
に対し \fB"\|"\fP を指定すると、
.I c
に対するキーコードマッピングを無効にします。
.RE
.IP "\fBkill\fP [\fB\-l\fP \(bv \fB\-\fP\fIsignal\fR] [\fIpid\fR \(bv \fIjob\fR .\|.\|.]"
プロセス番号
.I " pid"
で表されるプロセスまたは
.I " job"
で表されるジョブに対して
.I " signal"
で表されるシグナルを送ります。
.I signal
は数値もしくはシグナル名で表します。

.I signal
を省略すると
.B " SIGTERM"
を送ります。
.B \-l
を指定するとシグナルを送る代わりに
.I " signal"
として使えるシグナル名を一覧表示します。
.IP "\fBlaunch\fP \fIext\fR [\fIcom\fR [\fIformat\fR [\fItop\fR \fIbottom\fR]]]"
拡張子
.I " ext"
に対する挙動をランチャとして登録します。
.I com
にはコマンドのマクロ表記を \fB"\fP で括って記述します。
アーカイブブラウザを登録する場合には、
.I com
にはアーカイブファイルの一覧表示のためのコマンドを記述し、
.I format
に一覧表示形式のフォーマットを記述します。
.I top
及び
.I " bottom"
を記述すると、
一覧表示のうちで不必要な行を、
それぞれ先頭行からの行数及び最終行から行数として指定できます。
.I ext
の先頭を
.B " /"
で始めると、
拡張子の比較の際に大文字小文字の違いを無視して比較します。

.I com
を省略すると、拡張子
.I " ext"
に対するランチャ登録を削除します。
.IP "\fBmd\fP \fIdir\fR"
.PD 0
.IP "\fBmkdir\fP \fIdir\fR"
.PD
ディレクトリ
.I " dir"
を作成します。
.B (D)
.IP "\fBnewgrp\fP [\fIarg .\|.\|.\fR]"
.B fd
の実行を
.BR " newgrp" (1)
に置換えて実行を続けます。
.BR newgrp (1)
の引数として
.I " arg"
を指定できます。
.BR newgrp (1)
を参照して下さい。
.B (U)
.IP "\fBlogin\fP [\fIarg .\|.\|.\fR]"
.B fd
の実行を
.BR " login" (1)
に置換えて実行を続けます。
.BR login (1)
の引数として
.I " arg"
を指定できます。
.BR login (1)
を参照して下さい。
.B (U)
.IP "\fBlogout\fP [\fIn\fR]"
ログインシェルを終了します。
.I n
が指定されていると終了ステータス
.I " n"
で終了します。
.IP "\fBprintarch\fP [\fIext\fR]"
拡張子
.I " ext"
のアーカイブファイルに対して登録されているアーカイバコマンドを表示します。

.I ext
を省略すると、
現在登録されている全てのアーカイバコマンドを一覧表示します。
.IP "\fBprintbind\fP [\fIc\fR]"
キー
.I " c"
に割当てられているコマンドを表示します。
キーの指定方法は
.B " bind"
コマンドと同様です。

.I c
を省略すると、
現在登録されている全てのキー割当てのうち、
内部コマンドではなくコマンドマクロとして定義されているものを一覧表示します。
各内部コマンドのキー割当ては、
.B HELP_MESSAGE
で参照できます。
.IP "\fBprintdrv\fP [\fIc\fR]"
ドライブ名
.I " c"
に対して登録されているフロッピードライブのデバイスファイル
及びそのヘッド数、セクタ数、シリンダ数を表示します。
.B (U)

.I c
を省略すると、
現在登録されている全てのフロッピードライブを一覧表示します。
.IP "\fBprintlaunch\fP [\fIext\fR]"
拡張子
.I " ext"
に対してランチャとして登録されているコマンドマクロを表示します。
アーカイブブラウザとして登録されているものについては、
一覧表示形式のフォーマットを併記します。

.I ext
を省略すると、
現在登録されている全てのランチャを一覧表示します。
.IP "\fBpwd\fP"
カレントディレクトリを絶対パス表記で出力します。
.IP "\fBread\fP [\fINAME .\|.\|.\fR]"
標準入力から一行読込み、
その文字列を内部変数
.I " NAME"
に代入します。
入力文字列は
.B " IFS"
で区切って単語毎に分割されます。
.I NAME
が複数指定されていた場合は、
行の先頭の単語から順に一つずつ代入され、
最後の
.I " NAME"
に残り全部が代入されます。
入力行の中の単語数が
.I " NAME"
の数に満たない場合は、
余った
.I " NAME"
にはナルが定義されます。
.IP "\fBreadonly\fP [\fINAME\fR[\fB=\fP[\fIvalue\fR]] .\|.\|.]"
内部変数
.I " NAME"
を読込み専用にします。
これ以降、
.I " NAME"
の値を変更することはできなくなります。
値の定義も同時に行ないたい場合は、
.I value
を指定して下さい。

.B =
のみ記述して
.I " value"
を省略すると、
内部変数
.I " NAME"
の値としてナルを定義します。
引数なしで実行された場合は、
現在読込み専用にされている内部変数の一覧を表示します。
.IP "\fBrd\fP \fIdir\fR"
.PD 0
.IP "\fBrmdir\fP \fIdir\fR"
.PD
ディレクトリ
.I " dir"
を削除します。
中身が空でないディレクトリは削除できません。
.B (D)
.IP "\fBren\fP \fIold\fR \fInew\fR"
.PD 0
.IP "\fBrename\fP \fIold\fR \fInew\fR"
.PD
ファイル名またはディレクトリ名
.I " old"
を
.I " new"
に変更します。
.I old
や
.I " new"
にワイルドカードを指定して複数のファイル名を一括して変更することもできます。
.B (D)
.IP "\fBrem\fP [\fIarg\fR .\|.\|.]"
何もしません。
.B :
と同等です。
.B (D)
.IP "\fBreturn\fP [\fIn\fR]"
.I n
で指定された返り値で関数を終了します。
.I n
を省略した場合は直前に実行したコマンドの終了ステータスを返り値とします。
関数の外では使えません。
.IP "\fBset\fP [\fB\-\-abCefhkmntuvx\fP] [\fB\-o\fP \fIoption\fR] [\fIarg\fR .\|.\|.]"
引数なしで実行された場合は、
内部変数と関数の一覧を表示します。
.I arg
が指定された場合は
.I " arg"
を位置パラメータ
.BR " $1" ,
.BR $2 ,
\&.\|.\|.,
.BI $ n
に順次代入します。
オプションが指定された場合は各々以下のような意味を持ちます。
各オプションパラメータは、
.B \-
の代わりに
.B " \+"
を用いると、
各々のオプションをオフにします。
.RS
.PD 0
.IP "\fB\-a\fP" 5
内部変数が定義されると自動的に
.B " export"
します。
.IP "\fB\-b\fP"
バックグラウンドジョブが終了した時点で、
直ちに状況通知を表示します。
ジョブ制御が有効でない場合は意味を持ちません。
.IP "\fB\-C\fP"
ファイルへのリダイレクト時に、
既存ファイルに対し上書きをしないようにします。
.IP "\fB\-e\fP"
コマンドが
.B " 0"
以外の終了ステータスを返した時に即座に終了します。
.IP "\fB\-f\fP"
ワイルドカードの展開を抑制します。
.IP "\fB\-h\fP"
コマンドハッシュを先読みして登録します。
また、
関数が定義された時点で、
その中で使われているコマンドを先読みしてコマンドハッシュに登録します。
コマンドハッシュ自体は
.B " \-h"
オプションに拘らず常に有効になっています。
.IP "\fB\-k\fP"
.IR NAME\fB=\fP [ value ]
形式の変数定義がコマンドライン文字列の先頭以外にある場合も変数定義として扱います。
.IP "\fB\-m\fP"
ジョブ制御を有効にします。
このオプションはデフォルトで有効になっています。
.B (U)
.IP "\fB\-n\fP"
コマンド入力を読込むだけで実行しません。
.IP "\fB\-o\fP \fIoption\fR"
.I option
には以下の識別子が有効です。
.RS
.PD 0
.IP "\fBallexport\fP" 5
.B \-a
と同等です。
.IP "\fBemacs\fP"
.B EDITMODE=emacs
と同等です。
.IP "\fBerrexit\fP"
.B \-e
と同等です。
.IP "\fBhashahead\fP"
.B \-h
と同等です。
.IP "\fBignoreeof\fP"
対話型シェルの場合、
.B EOF
を入力してもシェルを終了しないようにします。
.IP "\fBkeyword\fP"
.B \-k
と同等です。
.IP "\fBmonitor\fP"
.B \-m
と同等です。
.IP "\fBnoclobber\fP"
.B \-C
と同等です。
.IP "\fBnoexec\fP"
.B \-n
と同等です。
.IP "\fBnoglob\fP"
.B \-f
と同等です。
.IP "\fBnotify\fP"
.B \-b
と同等です。
.IP "\fBnounset\fP"
.B \-u
と同等です。
.IP "\fBonecmd\fP"
.B \-t
と同等です。
.IP "\fBverbose\fP"
.B \-v
と同等です。
.IP "\fBvi\fP"
.B EDITMODE=vi
と同等です。
.IP "\fBxtrace\fP"
.B \-x
と同等です。
.RE
.IP "\fB\-t\fP"
現在のコマンド入力行を実行し終えた時点で即座に終了します。
.IP "\fB\-u\fP"
未定義の変数が参照された場合にエラーとして扱います。
.IP "\fB\-v\fP"
コマンド入力を読込む度にその入力文字列を表示します。
.IP "\fB\-x\fP"
コマンド実行時にそのコマンド文字列を表示します。
.IP "\fB\-\-\fP"
オプションの終わりを示します。
何の変更もしません。
.PD
.RE
.IP "\fBsetdrv\fP \fIc\fR \fIdevice\fR \fIhd\fR \fIsc\fR \fIcl\fR"
MS-DOS フロッピーを扱うドライブ名
.I " c"
に
.I " device"
で表されるデバイスファイルを指定します。
同時に、
.I device
のドライバで扱うフォーマットの
ヘッド(サイド)数、セクタ数、シリンダ(トラック)数を、
それぞれ
.IR " hd" ,
.IR sc ,
.I cl
で指定します。
特殊な例として、720KB2DD(hd=2/sc=9/cl=80) しか扱えない
ドライバで 640KB2DD(hd=2/sc=8/cl=80) のフロッピーを扱いたい場合、
.I sc
の値として
.B " 100"
加えた値(108)を指定します。
.B (U)

PC 上で動作する PC-UNIX 環境では、
.IR hd ,
.IR sc ,
.I cl
の代わりに文字列
.B " HDD"
もしくは
.B " HDD98"
を指定することで、
MS-DOS フロッピーではなく、
それぞれ PC/AT 互換機用と PC-98x1 用の
ハードディスクの MS-DOS パーティションを登録することができます。
この場合、
デバイスファイルにはパーティション (スライス) 単位のデバイス名ではなく、
物理ドライブ装置単位のデバイス名を記述します。
ドライブ装置に含まれる MS-DOS パーティションが、
ドライブ名
.I " c"
以降のドライブ名に自動的に展開されます。
指定ドライブ装置に MS-DOS パーティションが含まれていなかった場合には、
このコマンドは無視されます。
どのドライブ名が有効になったかは、
.B printdrv
コマンドで確認できます。
但し、安全のため、ハードディスクは読込専用で登録されます。
.IP "\fBshift\fP [\fIn\fR]"
.BI $ n\+1
以降の位置パラメータを
.B " $1"
から順に再設定します。
元の
.B " $1"
から
.BI " $" n
までの位置パラメータは破棄されます。
.I n
を省略した場合は
.B " 1"
が指定されたものと見なされます。
.IP "\fBtest\fP [\fIexpr\fR]"
.PD 0
.IP "\fB[\fP \fIexpr\fR \fB]\fP"
.PD
条件式
.I " expr"
を評価します。
.BR test (1)
を参照して下さい。
.IP "\fBtimes\fP"
これまでに実行されたプロセスのユーザ及びシステム積算時間を表示します。
.IP "\fBtrap\fP [\fIcom\fR] [\fIn\fR .\|.\|.]"
.B fd
がシグナル
.I " n"
を受取った際にコマンド
.I " com"
が評価され実行されます。
.I com
が省略された場合はそのシグナルに対するトラップは元の状態に戻されます。
.I com
の値としてナルが指定された場合はそのシグナルは無視されます。
.I n
の値として
.B " 0"
を指定するとコマンド
.I " com"
は終了時に実行されます。
.I com
も
.I " n"
も省略した場合は登録されているトラップの一覧を表示します。
.IP "\fBtrue\fP"
終了ステータス
.B " 0"
を返すだけで何もしません。
.IP "\fBtype\fP [\fIcom\fR .\|.\|.]"
各々の
.I " com"
がコマンド名として使用された場合にどう扱われるかを表示します。
.IP "\fBulimit\fP [\fB\-SH\fP] [\fB\-a\fP \(bv \fB\-cdflmnstv\fP] \fIn\fR"
.B fd
及びその子プロセスが利用できるリソースの制限を
.I " n"
で表される値に設定します。
.I n
には文字列
.B " unlimited"
もしくは数値を用い、
.B unlimited
は指定可能な最大値を意味します。
.B (U)

.B \-H
を指定するとハードな制限を設定します。
.B \-S
を指定するとソフトな制限を設定します。
どちらも指定しないと両方の制限を設定します。
.I n
を省略すると現在の設定値を表示します。
.B \-a
を指定すると全ての制限に対して設定値を表示します。

以下のオプションを指定するとそれぞれの制限を個々に設定もしくは表示します。
これらのオプションがどれも指定されていない場合は、
.B \-f
が指定されたものと見なします。
.RS
.PD 0
.IP "\fB\-c\fP" 5
コアファイルサイズの最大値。(ブロック単位)
.IP "\fB\-d\fP"
データセグメントの最大値。(KB 単位)
.IP "\fB\-f\fP"
ファイルサイズの最大値。(ブロック単位)
.IP "\fB\-l\fP"
メモリロックの最大値。(KB 単位)
.IP "\fB\-m\fP"
プロセスサイズの最大値。(KB 単位)
.IP "\fB\-n\fP"
同時にオープンできるファイル数の最大値。
.IP "\fB\-s\fP"
スタックサイズの最大値。(KB 単位)
.IP "\fB\-t\fP"
CPU 時間の最大値。(秒単位)
.IP "\fB\-v\fP"
仮想メモリの最大値。(KB 単位)
.PD
.RE
.IP "\fBumask\fP [\fInnn\fR]"
ファイル生成マスク値を
.I " nnn"
に設定します。
.I nnn
を省略した場合は現在のファイル生成マスク値を表示します。
.BR umask (2)
を参照して下さい。
.IP "\fBunalias\fP \fIname\fR"
エイリアス
.I " name"
の定義を取消します。
.I name
にはワイルドカードを用いることが可能で、
その場合にはマッチする全てのエイリアス定義を取消します。
"\(**" を指定すれば、全エイリアス定義が無効になります。
.IP "\fBunset\fP [\fINAME\fR .\|.\|.]"
各々の
.I " NAME"
に対して定義されている内部変数や関数の定義を削除します。
但し下記の変数定義は削除できません。
.RS 20
.ta 1i 2i 3i
.nf
.ft B
PATH	PS1	PS2	IFS
.ft R
.fi
.RE
.IP "\fBunsetdrv\fP \fIc\fR \fIdevice\fR \fIhd\fR \fIsc\fR \fIcl\fR"
既に登録されているフロッピードライブの登録を削除します。
.IR device ,
.IR hd ,
.IR sc ,
.I cl
の全てが一致した登録のみ削除されるので、
よく確認して削除して下さい。
.B (U)

.B setdrv
時に
.B " HDD"
または
.B " HDD98"
で登録した場合には、
.IR hd ,
.IR sc ,
.I cl
の代わりにそれぞれ
.B " HDD"
及び
.B " HDD98"
を記述します。
.IP "\fBwait\fP [\fIpid\fR \(bv \fIjob\fR]"
プロセス番号
.I " pid"
で表されるプロセスまたは
.I " job"
で表されるジョブを待ち、その終了ステータスを返します。
.I pid
も
.I " job"
も指定しない場合はカレントジョブを待ちます。
.B (U)
.IP "\fICOMMAND\fR [\fIarg\fR]"
.B fd
の持つ内部コマンド
.I " COMMAND"
を実行します。
.I COMMAND
には、各コマンド識別子を記述します。
一部の内部コマンドでは、
実行回数や対象ディレクトリ等のパラメータを引数
.I " arg"
として記述できます。
.PP
上記の各登録文字列内の
.B " ~"
や
.B " $"
は展開されますが、
\fB"\fP の代わりに
.B " '"
で括られた文字列内では、
これらの展開が抑制されます。
.SS ツリー表示画面
ツリー表示画面では、
ファイルシステム全体の構造をツリーで表すには時間がかかり過ぎるので、
最初は直系の親に当たるディレクトリと、
カレントディレクトリ直下のサブディレクトリのみ表示します。
直系の親に当たるディレクトリでは、
その他のサブディレクトリ(あった場合)を "\fB.\|.\|.\fP" で一括して表します。
このように一括表示されたサブディレクトリでは、
カーソルがその位置に来ると自動的に展開するようになっています。

まだその内部を展開していないサブディレクトリには、
ファイル名の後ろに
.RB " '" > '
をつけてその旨を表記します。
このようなディレクトリは、明示的に展開を要求しない限りは展開しないので、
展開されていないサブディレクトリ下に移動したい場合は
下記に示すキー入力により展開してから移動して下さい。

ツリー表示モードでは、以下のキー入力が有効です。
.PD 0
.RS
.IP "\fB↑\fP, \fB↓\fP" 10
カーソル移動
.IP "\fB→\fP"
カーソル位置のサブディレクトリの展開
.IP "\fBTab\fP"
カーソル位置のサブディレクトリの展開(再帰的)
.IP "\fBPageUp\fP, \fBPageDown\fP"
半画面分のカーソル移動
.IP "\fBHome\fP(<), \fBEnd\fP(>)"
ツリーの先頭、最後尾にカーソル移動。
.IP "\fB?\fP"
カレントディレクトリにカーソル移動。
.IP "\fBBs\fP"
親ディレクトリにカーソル移動。
.IP "\fB←\fP"
カーソル位置のサブディレクトリの一括化。
または親ディレクトリにカーソル移動。
.IP "\fB(\fP, \fB)\fP"
同じ階層のサブディレクトリで、前(次)のディレクトリにカーソル移動。
.IP "\fBA\fP \- \fBZ\fP"
そのキーの文字及びその子文字を頭文字とするような
名前を持つディレクトリにカーソル移動。
.IP "\fBl\fP"
ツリー表示ディレクトリの変更。
フロッピードライブへの移動も行なえます。
.IP "\fB^L\fP"
ツリー構造の再描画
.IP "\fBReturn\fP"
ディレクトリの選択
.IP "\fBEsc\fP"
キャンセル
.RE
.PD
.PP
なお、再帰的にディレクトリの展開を行なっている時など、
マシンの処理が遅くてフリーズしているように見える場合があるかも知れません。
このような場合には、処理中に何らかのキーを入力して下さい。
ディレクトリの展開中にキー入力を認めた場合、
途中であってもその時点でディレクトリの展開を中止します。
キーリピートが効き放しになった場合でも、
この機能のおかげで処理が溜らないようになっています。
.SS アーカイブブラウザ
アーカイブブラウザの登録されている拡張子のファイル位置でランチャを起動すると、
アーカイブブラウザ画面になります。
この画面では、通常のディレクトリ内と同じように、
アーカイブファイル内のファイルをブラウジングしていくことができます。
但し、この画面では以下の内部コマンドは使用できません。
.PD 0
.PP
.RS
.ta 1.5i 3i 4.5i
.nf
.ft B
LOG_TOP	LOG_DIR	ATTR_FILE	COPY_FILE
MOVE_FILE	DELETE_FILE	DELETE_DIR	RENAME_FILE
MAKE_DIR	WRITE_DIR	TREE_DIR	EDIT_FILE
LOG_TREE	COPY_TREE	MOVE_TREE	FIND_DIR
SYMLINK_MODE	DOTFILE_MODE	FILEFLG_MODE	SPLIT_WINDOW
.ft R
.fi
.RE
.PD

また、新しいアーカイブブラウザを登録したい場合、
以下のような書式でアーカイバの一覧表示形式のフォーマットを記述してやる
必要があります。
フォーマット文字列ひとつで、
一覧表示の 1 ファイル分の表示形式を表すことになります。
.PD 0
.PP
.RS
.ta 1i
.nf
\fB%a\fP	ファイルモードを表すフィールド
\fB%u\fP	ファイルの UID を表すフィールド
\fB%g\fP	ファイルの GID を表すフィールド
\fB%s\fP	ファイルサイズを表すフィールド
\fB%y\fP	ファイル作成年を表すフィールド
\fB%m\fP	ファイル作成月を表すフィールド
	(表示は数値でも英字 3 文字表記でもどちらでも可。)
\fB%d\fP	ファイル作成日を表すフィールド
\fB%t\fP	ファイル作成時間を表すフィールド
	(表示は "HH:MM:SS" 形式。分や秒はなくても可。)
\fB%f\fP	ファイル名を表すフィールド
\fB%x\fP	必要のないフィールド (無視されます。)
\fB%%\fP	% 自身
\fB\en\fP	改行
\fBSpace Tab\fP	0 個以上の空白文字もしくは Tab。
.fi
.RE
.PD
.PP
ここでは、
「フィールド」とは空白文字、
タブ文字または改行で分けられている領域のことを指します。
各情報を表す文字列がこれらの文字で区切られている場合は、
上記のうちそのフィールドを表す文字列をそのまま並べて記述します。
これらの文字以外で区切られている場合は、
上記の文字列をその区切り文字で区切って記述します。
また、
フィールド長を数値で表して、
.I %10a
のように記述することもできます。
この例ではファイルモードを表すフィールドが 10 文字から成ることを表しています。

ひとつのフィールドが、
場合によって異なる二つの意味を持つような場合は、
.I %{yt}
のように
.B " { }"
で括って記述します。
この例ではこのフィールドが作成年または作成時間を示すことを表しています。
また、
一つのファイル情報が複数行から成るような場合には、
フォーマット文字列中の改行位置に
.B " \en"
を含めて下さい。

例として、幾つかのアーカイバの一覧表示形式のフォーマットを、
この書式で記述して挙げておきます。
ここでは見易さのため空白文字を使いますが、
各フィールド間の空白文字は無視されますのであっても無くても構いません。
.PD 0
.IP "`\fBlha l\fP'" 18
"%9a %u/%g %s %x %m %d %{yt} %f"
.IP "`\fBlha v\fP' (MS\-DOS)"
"%f\en%s %x %x %y-%m-%d %t"
.IP "`\fBtar tvf\fP' (BSD)"
"%9a %u/%g %s %m %d %t %y %f"
.IP "`\fBtar tvf\fP' (SVR4)"
"%a %u/%g %s %m %d %t %y %f"
.PD
.PP
以上のフォーマットを用いて、
.B EXECUTE_SH
の組込みコマンドもしくは
初期設定ファイルによって登録を行なえば、
デフォルトで用意してあるアーカイブブラウザ以外も使用できるようになります。
但し、アーカイブファイル内のファイルを実行したり閲覧したりするためには、
そのアーカイブファイル用のアーカイバコマンドも登録しておく必要がありますので、
注意して下さい。

一部の OS では、
環境変数
.B " LANG"
に
.I " japanese"
を指定しておくと、
タイムスタンプの表示に "HH時 MM分 SS秒" という
日本語混在の出力をする
.BR " tar" (1)
が存在します。
このような表示形式は
.B " fd"
では解析できないので、
この場合は初期設定ファイルで
.I " `export LANG=C'"
としておくか、
一覧表示用のコマンド記述で
.I " `LANG=C tar tvf'"
のように
.B " LANG"
を指定すると良いでしょう。
.SS "フロッピードライブ (U)"
ディレクトリ名の先頭に "\fIc\fR\fB:\fP" をつけて書き表すことで、
MS-DOS フォーマットのフロッピーにアクセスすることができます。
但し、フロッピードライブの登録と、
この機能を有効にするための環境変数
.B " DOSDRIVE"
の設定を事前に行なっておくことが必要です。

登録された各ドライブは、ドライブ名によって区別されます。
物理的に異なるドライブには必ず異なるドライブ名をつけて下さい。
同一のドライブで複数のフォーマットに対応している場合は、
それぞれのフォーマットの登録を同じドライブ名で行なっても構いませんし、
それぞれ異なるドライブ名で行なっても構いません。
同じドライブ名をつけられた場合には、
登録されている順番にフォーマットの適合を試みますので、
よく使うフォーマットの登録を先に持ってきた方が良いでしょう。

フロッピードライブはドライブ単位でカレントディレクトリを持っています。
この初期値はルートディレクトリで、
フロッピーを入れ換えるとカレントディレクトリは
再びルートディレクトリに戻ります。
ディレクトリ名として
.RB " '" : '
の後ろを '/' で始めると、
そのドライブの絶対パス表記になります。
この '/' がないと、そのドライブのカレントディレクトリからの
相対表記と見なされますので注意して下さい。

但し、
.BR WRITE_DIR ,
.B INFO_FILESYS
など一部の内部コマンドは、
フロッピードライブに対応していませんのでご了承下さい。
また、ファイル名長などの制限から、
UNIX 上のファイルをコピーした場合に名前が変更される場合があります。

ドライブ名として小文字を用いると、
MS-Windows format floppy の Long File Name (LFN) が扱える
フロッピードライブとしてアクセスできます。
この場合、UNIX 上の長いファイル名もそのままコピーすることができます。
但し、UNICODE の変換テーブル
.B " fd\-unicd.tbl"
が、起動された
.B " fd"
の存在するディレクトリにない場合は、
漢字のファイル名は LFN 形式では扱えません。
逆に、大文字のドライブ名を用いると、
LFN を無視して 8+3 形式のファイル名を扱います。
このドライブ名の大小による仕様は、
MS-DOS 版にもそのまま継承されています。
.SS 文字列の入力
パス名などの文字列を入力する場合には、
以下のキー入力が有効です。
参照される履歴の種類は要求される入力文字列によって異なります。
ウィンドウ分割モードでは、
もう一方のウィンドウのカレントディレクトリが常にパス名履歴の先頭にあります。
.PD 0
.IP "\fB←\fP, \fB→\fP" 10
カーソル移動。
.IP "\fB↑\fP, \fB↓\fP"
これまでの履歴 (コマンド及びパス名のみ) の参照。
またはカーソル移動。
.IP "\fBBeg\fP"
文字列の先頭にカーソル移動。
.IP "\fBEol\fP"
文字列の最後尾にカーソル移動。
.IP "\fBIns\fP"
挿入モードと上書モードの切替え。(起動時は挿入モード)
.IP "\fBDel\fP"
カーソル位置の一文字を消去。
.IP "\fBBs\fP"
カーソル直前の一文字を消去。
.IP "\fBDelLin\fP"
カーソル以降の文字列全てを消去。
.IP "\fBInsLin\fP"
後続の入力文字をそのまま入力文字として扱います。
コントロール文字の入力に有効です。
.IP "\fBEnter\fP"
現在のカーソル位置のファイル名を取込。
.IP "\fBPageUp\fP"
カーソル位置の英文字を大文字に。
.IP "\fBPageDown\fP"
カーソル位置の英文字を小文字に。
.IP "\fBTab\fP"
カーソル位置でパス名の補完。
または補完選択候補リスト内での候補移動。
選択候補が複数ある場合には、
何度か入力し続けることにより選択候補リストが表示されます。
.IP "\fB^L\fP"
入力文字列の再描画。
.IP "\fBReturn\fP"
入力決定。
または補完選択候補リスト内での候補決定。
.IP "\fBEsc\fP"
キャンセル。
.PD
.PP
また、入力された文字列は、評価される直前に以下のような展開が行なわれます。
この展開は、コマンドマクロの文字列中でも有効です。
但し、引用符
.B " '"
で括られた文字列中においては
この展開は抑制されます。
.IP "\fB~\fP" 8
ファイル名の先頭にあって、ユーザ本人のホームディレクトリを指します。
.IP "\fB~\fP\fIuser\fR"
ファイル名の先頭にあって、
.I user
のホームディレクトリを指します。
.B (U)
.IP "\fB~FD\fP"
ファイル名の先頭にあって、起動された
.B " fd"
の存在するディレクトリを指します。
.IP "\fB$\fP\fINAME\fR"
.PD 0
.IP "\fB${\fP\fINAME\fR\fB}\fP"
.PD
内部変数、または環境変数
.I " NAME"
の値を指します。
重複して定義されている場合は、内部変数の方が優先します。
どちらにも未定義だった場合はナルに置き換わります。
中括弧
.B " { }"
は
.I " NAME"
を後続の文字から分離します。

.I NAME
が以下の一文字であった場合には、
シェルによって自動的に代入された値に置き換わります。
.RS
.PD 0
.IP "\fB0\fP" 7
起動時の実行ファイル名。
.IP "[\fB1\fP\-\fB9\fP]"
位置パラメータ。
.IP "\fB\(**\fP"
.B $1
で始まる全ての位置パラメータ。
\fB"$\(**"\fR は \fB"$1 $2\fR .\|.\|.\fB"\fR に置き換わります。
.IP "\fB@\fP"
.B $1
で始まる全ての位置パラメータ。
\fB"$@"\fR は \fB"$1" "$2"\fR .\|.\|. に置き換わります。
.IP "\fB#\fP"
位置パラメータの数。
.IP "\fB\-\fP"
起動時オプションまたは
.B " set"
コマンドで設定されたオプションフラグ。
.IP "\fB?\fP"
直前に実行されたコマンドの終了ステータス。
.IP "\fB$\fP"
現行シェルのプロセス番号。
.IP "\fB!\fP"
直前に実行されたバックグラウンドプロセスのプロセス番号。
.PD
.RE
.IP "\fB${\fP\fINAME\fR\fB:\-\fP\fIword\fR\fB}\fP"
内部変数、または環境変数
.I " NAME"
にナル以外の値が設定されていればその値に置き換わり、
そうでなければ
.I " word"
に置き換わります。
.IP "\fB${\fP\fINAME\fR\fB:=\fP\fIword\fR\fB}\fP"
内部変数、または環境変数
.I " NAME"
にナル以外の値が設定されていればその値に置き換わり、
そうでなければ
内部変数
.I " NAME"
に
.I " word"
を代入し、
この式自体は
.I " word"
に置き換わります。
但し、
位置パラメータには代入できません。
.IP "\fB${\fP\fINAME\fR\fB:?\fP\fIword\fR\fB}\fP"
内部変数、または環境変数
.I " NAME"
にナル以外の値が設定されていればその値に置き換わり、
そうでなければ
.I " word"
を表示してシェルから抜けます。
.I word
が省略された場合は、
代わりに
.B " parameter null or not set"
という文字列を表示します。
.IP "\fB${\fP\fINAME\fR\fB:\+\fP\fIword\fR\fB}\fP"
内部変数、または環境変数
.I " NAME"
にナル以外の値が設定されていれば
.I " word"
に置き換わり、
そうでなければナルに置き換わります。
.IP "\fB${\fP\fINAME\fR\fB\-\fP\fIword\fR\fB}\fP"
内部変数、または環境変数
.I " NAME"
に値が設定されていればその値に置き換わり、
そうでなければ
.I " word"
に置き換わります。
.IP "\fB${\fP\fINAME\fR\fB=\fP\fIword\fR\fB}\fP"
内部変数、または環境変数
.I " NAME"
に値が設定されていればその値に置き換わり、
そうでなければ
内部変数
.I " NAME"
に
.I " word"
を代入し、
この式自体は
.I " word"
に置き換わります。
但し、
位置パラメータには代入できません。
.IP "\fB${\fP\fINAME\fR\fB?\fP\fIword\fR\fB}\fP"
内部変数、または環境変数
.I " NAME"
に値が設定されていればその値に置き換わり、
そうでなければ
.I " word"
を表示してシェルから抜けます。
.I word
が省略された場合は、
代わりに
.B " parameter null or not set"
という文字列を表示します。
.IP "\fB${\fP\fINAME\fR\fB\+\fP\fIword\fR\fB}\fP"
内部変数、または環境変数
.I " NAME"
に値が設定されていれば
.I " word"
に置き換わり、
そうでなければナルに置き換わります。
.IP "\fB\e\fP\fIc\fR"
文字
.I " c"
自身を示します。
上記の
.B " ~"
や
.B " $"
などのメタキャラを評価せずにそのまま文字として使いたい時に用います。
.B \e
自身は "\fB\e\e\fP" と表します。
但し、MS-DOS 版では、パス名デリミタに用いられる
.B " \e"
は通常文字と同様に処理されなくてはならないため、
便宜上
.BI " %" c
の形で
.B " \e"
の代用とします。
.PP
.PD
以降は
.B " EXECUTE_SH"
や
.B " EXECUTE_FILE"
で実行されるシェル内でのみ置き換えられます。
.IP "\fB`\fP\fIlist\fR\fB`\fP" 8
.I list
を実行しその標準出力に置き換わります。
.IP "\fB?\fP"
.PD 0
.IP "\fB\(**\fP"
.IP "\fB[\fP"
.IP "\fB]\fP"
.PD
これらの文字が含まれる文字列は、
既存ファイル名とのパターンマッチングを行ない、
マッチした場合はマッチした全てのファイル名をアルファベット順にソートしたものに置き換えられます。
.RS
.PD 0
.IP "\fB?\fP" 5
.B /
以外の任意の一文字とマッチします。
.IP "\fB\(**\fP"
.B /
を含まない 0 個以上の任意の文字列とマッチします。
.IP "\fB\(**\(**\fP"
.B /
を含む 0 個以上の任意の文字列とマッチします。
.IP "\fB[\fP.\|.\|.\fB]\fP"
.B [ ]
で囲まれた文字のうち任意の一文字とマッチします。
囲まれた文字に
.B " \-"
が含まれる場合、
.B \-
の両端の文字間の文字コードを持つ全ての文字にマッチします。
.IP "\fB[!\fP.\|.\|.\fB]\fP"
.B [ ]
で囲まれた文字以外の任意の一文字とマッチします。
.PD
.PP
但し、
ファイル名部分の先頭の一文字が
.B " ."
であった場合は、
.B ?
や
.B " \(**"
はマッチしません。
.RE
.SS 編集モード
カーソルキーやスクロールキーなど、
特殊機能キーに割り当てられている機能を利用したい場合、
端末の設定によっては対応するキーが存在しないこともあります。
そのような場合、内部変数
.B " EDITMODE"
に文字列を設定することで、
コントロール文字をこれらの特殊キーの代わりに用いることができます。
また、これらの代替キー機能は、
組込みコマンドによるキー割当て変更に優先しますので、
ここで代替キーとして用いられているコントロール文字については
キー割当ての変更が無効になります。
用意されている編集モードは以下の 3 つです。
.IP "\fBemacs\fP" 8
.RS 12
.ta 0.5i 1.5i 2i 3i 3.5i
.nf
\fB^P\fP	= \fB↑\fP	\fB^A\fP	= \fBBeg\fP
\fB^N\fP	= \fB↓\fP	\fB^E\fP	= \fBEol\fP	\fB^D\fP	= \fBDel\fP
\fB^F\fP	= \fB→\fP			\fB^Q\fP	= \fBInsLin\fP
\fB^B\fP	= \fB←\fP			\fB^K\fP	= \fBDelLin\fP
\fB^V\fP	= \fBPageDn\fP	\fB^Y\fP	= \fBPageUp\fP	\fB^O\fP	= \fBEnter\fP
\fB^M\fP	= \fBReturn\fP	\fB^I\fP	= \fBTab\fP	\fB^H\fP	= \fBBs\fP
\fB^[\fP	= \fBEsc\fP	\fB^G\fP	= \fBEsc\fP
.fi
.RE
.IP "\fBwordstar\fP"
.RS 12
.ta 0.5i 1.5i 2i 3i 3.5i
.nf
\fB^E\fP	= \fB↑\fP	\fB^A\fP	= \fBBeg\fP	\fB^V\fP	= \fBIns\fP
\fB^N\fP	= \fB↓\fP	\fB^F\fP	= \fBEol\fP	\fB^G\fP	= \fBDel\fP
\fB^F\fP	= \fB→\fP	\fB^W\fP	= \fBHome\fP	\fB^]\fP	= \fBInsLin\fP
\fB^S\fP	= \fB←\fP	\fB^Z\fP	= \fBEnd\fP	\fB^Y\fP	= \fBDelLin\fP
\fB^C\fP	= \fBPageDn\fP	\fB^R\fP	= \fBPageUp\fP	\fB^N\fP	= \fBEnter\fP
\fB^M\fP	= \fBReturn\fP	\fB^I\fP	= \fBTab\fP	\fB^H\fP	= \fBBs\fP
\fB^[\fP	= \fBEsc\fP
.fi
.RE
.IP "\fBvi\fP"
.B vi
モードは
「挿入モード」と「コマンドモード」の 2 つのローカルモードを持ち、
それぞれのモードでキーの機能が全く異なります。
入力開始時はコマンドモードにいるので、
一般のキー入力を行なうには
挿入モードへ移行する 4 種類のキーのいずれかを入力する必要があります。
.RS 12
.ta 0.5i 1.5i 2i 3i 3.5i
.nf
(コマンドモード)
\fBk\fP	= \fB↑\fP	\fB0\fP	= \fBBeg\fP	\fBI\fP	= \fBIns\fP
\fBj\fP	= \fB↓\fP	\fB$\fP	= \fBEol\fP	\fBx\fP	= \fBDel\fP
\fBl\fP	= \fB→\fP	\fBg\fP	= \fBHome\fP
\fBh\fP	= \fB←\fP	\fBG\fP	= \fBEnd\fP	\fBD\fP	= \fBDelLin\fP
\fB^F\fP	= \fBPageDn\fP	\fB^B\fP	= \fBPageUp\fP	\fBo\fP	= \fBEnter\fP
\fB^M\fP	= \fBReturn\fP	\fB^I\fP	= \fBTab\fP	\fB^H\fP	= \fBBs\fP
\fB^[\fP	= \fBEsc\fP
(コマンドモードから挿入モードへ)
\fBi\fP, \fB:\fP	= モードの移行のみ
\fBa\fP	= + \fB→\fP	\fBA\fP	= + \fBEol\fP
\fBR\fP	= 上書	\fBr\fP	= 一文字上書
(挿入モード)
\fB^V\fP	= \fBInsLin\fP	\fBEsc\fP	= コマンドモードへ
.fi
.RE

.RS
かなり特殊なキー割当てなので、
日常的に
.B " vi"
エディタを用いていない人には不向きでしょう。
.RE
.SS パラメータマクロ
コマンドマクロの登録、及びコマンド実行用に入力する文字列内では、
以下のパラメータマクロが使用できます。
但し、
関数の中や、
.B source
コマンド用の入力ファイル、
初期設定ファイルの中では使用できませんので、
これらの中でパラメータマクロを使う必要がある場合には
.B " evalmacro"
コマンドを使って下さい。
.IP "\fB%C\fP" 8
カーソル位置のファイル名。
但し、アーカイバコマンド登録用マクロではアーカイブファイルを指します。
.IP "\fB%X\fP"
カーソル位置のファイル名の拡張子を除いた部分。
但し、アーカイバコマンド登録用マクロではアーカイブファイル
の拡張子を除いた部分を指します。
拡張子は最後尾の一個だけ除かれます。
また、
.B %X
に続けて
.BR " T" ,
.BR TA ,
.B M
を記述すると、
それぞれ
.BR " %T" ,
.BR %TA ,
.B %M
の拡張子を除いた部分になります。
MS-DOS 版では同様に
.B " S"
を続けて記述できます。
.IP "\fB%P\fP"
カレントディレクトリのパス名。
.IP "\fB%K\fP"
コマンド終了後、キー入力を待ってから
.B " fd"
に戻ります。
但し
.BR " EXECUTE_FILE" ,
.B EXECUTE_SH
では
.B " %K"
の意味は逆になり、
デフォルトでキー入力を待ち
.B " %K"
の指定があれば入力待ちしません。
また、ランチャのアーカイブブラウザ登録用マクロや、
アーカイバコマンド登録用マクロでは、
無条件にキー入力待ちはできません。
.IP "\fB%T\fP"
マークファイルを可能な限り空白で区切って羅列します。
ファイルが多くてコマンド行が
.B " 1023"
文字を越えるような場合には、
残りのマークファイルは無視されます。
.IP "\fB%TA\fP"
.B %T
と同様にマークファイルを羅列しますが、
コマンド行から溢れたファイルは、
再度同じコマンドを実行することで、
マークの最後までファイル名が渡されます。
.IP "\fB%M\fP"
マークファイルを一個ずつ渡し、
マークの数だけ同じコマンドを順々に実行します。
.B MARK_FIND
で検索マークしてから、
.B EXECUTE_SH
で "mv %M %XM.bak" などとすると便利でしょう。
.IP "\fB%N\fP"
パラメータが省略された場合のファイル名の追加を抑制します。
.IP "\fB%R\fP"
マクロ実行時に、コマンド文字列の長さに余裕があれば、
追加でパラメータを手入力するようにします。
入力時のカーソル位置は、マクロ中で
.B " %R"
のあった位置になります。
但し、
ランチャのアーカイブブラウザ登録用マクロや、
アーカイバコマンド登録用マクロ、
及び
.BR " EXECUTE_FILE" ,
.B EXECUTE_SH
では、
.B %R
は無視されます。
.IP "\fB%S\fP"
カーソル位置の LFN 形式のファイル名を 8+3 形式のファイル名で
置き換えたもの。
8+3 形式の引数しか使えない外部コマンドを用いる時に使います。
また、
.B %X
と同様に、
.B %S
に続けて
.BR " T" ,
.BR TA ,
.B M
を記述できます。
.B (D)
.IP "\fB%JS\fP"
このマクロで囲まれた範囲の文字列の漢字コードを、
Shift JIS に変換します。
.B (U)
.IP "\fB%JE\fP"
このマクロで囲まれた範囲の文字列の漢字コードを、
EUC 漢字に変換します。
.B (U)
.IP "\fB%J7\fP"
このマクロで囲まれた範囲の文字列の漢字コードを、
7bit JIS に変換します。
.B (U)
.IP "\fB%J8\fP"
このマクロで囲まれた範囲の文字列の漢字コードを、
8bit JIS に変換します。
.B (U)
.IP "\fB%JJ\fP"
このマクロで囲まれた範囲の文字列の漢字コードを、
ISO-2022-JP に変換します。
.B (U)
.IP "\fB%JH\fP"
このマクロで囲まれた範囲の文字列の漢字コードを、
HEX に変換します。
.B (U)
.IP "\fB%JC\fP"
このマクロで囲まれた範囲の文字列の漢字コードを、
CAP に変換します。
.B (U)
.IP "\fB%JU\fP"
このマクロで囲まれた範囲の文字列の漢字コードを、
UTF-8 に変換します。
.B (U)
.PP
コマンドマクロ内でパラメータマクロを展開した結果、
.B %C
や
.B " %T"
などによるファイル名パラメータが一つも渡されなかった場合、
自動的に展開された文字列の最後尾には、
カーソル位置のファイル名が
.I " ./filename"
の形で追加されます。
コマンド実行用の入力文字列の場合、
もしくは
.B " %N"
マクロがあった場合には、
そのようなファイル名の追加は行なわれません。
.SS カスタマイズ
.B fd
のカスタマイズには、以下のような方法があり、
複数の方法で重複して指定された場合には、この順で優先されることになります。
.RS 3
.IP "\fBEXECUTE_SH の組込みコマンド実行\fP" 10
各種登録用組込みコマンドを実行することで、
内部変数定義、環境変数定義、エイリアス定義、関数定義、
キー割当て、キーマップ変更、
ランチャ登録、アーカイバコマンド登録、フロッピードライブ登録が可能です。
.IP "\fBカスタマイザ\fP"
.B EDIT_CONFIG
コマンドにより、
内部変数定義、キー割当て、キーマップ変更、
ランチャ登録、アーカイバコマンド登録、フロッピードライブ登録が可能です。
.IP "\fBコマンドラインオプション\fP"
コマンドラインのオプションに、
.RI ` \fB\-\fPNAME\fB=\fPvalue '
の形式で値を渡すことにより、
内部変数の定義が可能です。
.IP "\fB.fd2rc\fP"
実行ユーザのホームディレクトリにある初期設定ファイル
.B " .fd2rc"
を用意しておくことで、
.B fd
の実行に先だってこのファイルに書かれたコマンドが実行されます。
組込みコマンドや外部コマンドを記述し、
各設定を行なうことが可能です。
但し、
ログインシェルとして
.B " fdsh"
が起動された場合は、
.B .fd2rc
の代わりに
.B " .fdshrc"
が読込まれます。

また、
.B .fd2rc
や
.B " .fdshrc"
の読込みに先だって、
システム管理者による初期設定ファイル
.B " /etc/fd2rc"
が読込まれます。
このファイルがある場合、
.B .fd2rc
や
.B " .fdshrc"
で意図的に登録を削除しない限り、
システム管理者の用意した初期設定が有効になります。

(MS-DOS 版ではそれぞれのファイル名は
.BR " $HOME\efd2.rc" , " $HOME\efdsh.rc"
及び
.B " ~FD\efd2rc"
となります。)
.IP "\fB環境変数\fP"
内部変数に定義して有効な変数は、
予め環境変数として定義しておいても有効です。
但し、
.B fd
内では常に内部変数の方が優先されます。
また、
同じ名前の環境変数が他のアプリケーションでも使われている場合、
.B fd
用に別の定義をしておきたければ、
各々の環境変数名の前に
.B " FD_"
の 3 文字を冠したものも同じ用途に使用できます。
この
.B " FD_"
を冠した環境変数は、冠していない環境変数よりも常に優先されるので、
.B FD_
のない内部変数の定義よりも、
.B FD_
を冠した環境変数の方が有効になります。
.RE
.SS カスタマイザ
.B EDIT_CONFIG
コマンドにより、
対話的に設定変更を行なうカスタマイザが起動します。
カーソルキーの左右でカテゴリを選び、
上下で項目を選んだ後、
.RB [ Return ]
でその内容を変更します。
変更が終わったら、
.RB [ Esc ]
でカスタマイザを終了します。

カテゴリには以下のようなものがあります。
.PD 0
.PP
.RS 3
.IP "\fB内部変数\fP" 10
内部変数の値を変更します。
変数により値の入力方法が異なりますので、
画面説明に従って入力して下さい。
.IP "\fBキー割当て\fP"
各キーに割当てる機能を変更します。
割当ての無いキーに新規に機能を割当てる場合には、
「新規登録」を選んで下さい。
「割当て削除」を選ぶと既存のキー割当てを削除します。
.IP "\fBキーマップ\fP"
各種機能キーのキーコードマッピングを変更します。
キーを押すように指示されたところで
.RB " [" Esc ]
を押すと、
既存のキーマップを削除します。
.B (U)
.IP "\fBランチャ\fP"
各拡張子に対するランチャ登録を変更します。
登録のない拡張子に新規にランチャを登録する場合には、
「新規登録」を選んで下さい。
ランチャ用コマンド入力の際に空行を入力すると、
既存のランチャ登録を削除します。
.IP "\fBアーカイバ\fP"
各拡張子に対するアーカイバコマンド登録を変更します。
登録のない拡張子に新規にアーカイバコマンドを登録する場合には、
「新規登録」を選んで下さい。
圧縮用コマンド入力と伸長用コマンド入力の際に両方とも空行を入力すると、
既存のアーカイバコマンド登録を削除します。
.IP "\fBDOS ドライブ\fP"
フロッピードライブ登録を変更します。
未設定のドライブ名に新規にフロッピードライブを登録する場合には、
「新規登録」を選んで下さい。
デバイス名入力の際に空行を入力すると、
既存のフロッピードライブ登録を削除します。
.B (U)
.IP "\fB保存\fP"
カスタマイザでの設定変更をファイルに保存したり、
設定を破棄して元の状態に戻したりします。
.RS 10
.IP Cancel 10
指定されたカテゴリの範囲に含まれるこれまでの設定変更を破棄し、
カスタマイザを起動する前の状態に戻します。
.IP Clear
指定されたカテゴリの範囲に含まれる全ての設定を破棄し、
デフォルト状態に戻します。
.IP Load
指定ファイルから設定を読込みます。
.IP Save
指定されたカテゴリの範囲に含まれる全ての設定を、
指定ファイルに保存します。
.IP Overwrite
指定されたカテゴリの範囲に含まれる全ての設定を、
指定された既存ファイルに上書き保存します。
ファイルに元々存在していた設定を構文解析し、
同じ対象の設定はできるだけ同じ場所に上書きします。
現在設定されていないものやカスタマイザ対象外のものは、
既存ファイルのものをそのまま残します。
.PD
.PP
カテゴリの範囲を指定する際には、
初期状態では全てのカテゴリが選択されているので、
.RB [ Space ]
で選択の on/off を切替えて
.RB " [" Return ]
で決定します。
.RE
.RE

設定変更をした後、
保存せずにカスタマイザを終了しようとすると、
保存しないままで終了して構わないかどうかを確認してきます。
保存しないまま終了しても設定変更は有効ですが、
次に
.B " fd"
を起動する時にも有効にしたい場合は、
初期設定ファイルに保存しておく必要があります。
.SH 環境変数
.B fd
では以下の環境変数が有効です。
これらの環境変数は、すべて内部変数として定義することも可能です。
また、
.RI ` \fB\-\fPNAME\fB=\fPvalue '
の書式でコマンドラインオプションとして与えることもできます。
但し、
変数名の後ろに \(** のついているものは、
環境変数として
.B " FD_"
の 3 文字を冠して利用することができません。
.IP "\fBCDPATH\fP\(**" 14
組込みコマンド
.B " cd"
の引数が
.B " /"
で始まっていない場合にここで指定されたパス名の中から検索するように指示します。
.RB ' : '
で区切って複数の検索パス名を指定できます。
デフォルトではパス名は一つも指定されていません。
.IP "\fBCOMSPEC\fP\(**"
バッチファイルを起動する場合に用いるシェルを指定します。
未指定時には環境変数
.B " SHELL"
で定義されたシェルもしくは \eCOMMAND.COM が用いられます。
.B (D)
.IP "\fBCOPYCMD\fP\(**"
組込みコマンド
.B " copy"
で使うデフォルトオプションを指定します。
.B (D)
.IP "\fBDIRCMD\fP\(**"
組込みコマンド
.B " dir"
で使うデフォルトオプションを指定します。
.B (D)
.IP "\fBHOME\fP\(**"
組込みコマンド
.B " cd"
の引数が無い場合のデフォルト値を示します。
また、
ログインシェルとして起動された場合は、
この変数が指定されているとそのディレクトリをカレントディレクトリとし、
指定されていないとホームディレクトリの値を自動的に定義します。
.IP "\fBIFS\fP\(**"
フィールド区切り文字を指定します。
.B EXECUTE_SH
でコマンドと引数とを区切るのに用いられます。
デフォルトでは空白、タブ、改行が指定されています。
.IP "\fBOPTARG\fP\(**"
組込みコマンド
.B " getopts"
でオプションの引数が代入されます。
.IP "\fBOPTIND\fP\(**"
組込みコマンド
.B " getopts"
で次に展開するパラメータの位置を指定します。
初期値は
.B " 1"
です。
.IP "\fBPATH\fP\(**"
外部コマンド実行時の検索パスを指定します。
.RB ' : '
で区切って複数の検索パス名を指定できます。
.IP "\fBSHELL\fP\(**"
ここで指定された値のファイル名部分が
.B " rfd"
または
.B " rfdsh"
である場合には、
起動時の
.B " \-r"
オプションと同様、
シェルの機能が一部制限されます。
また、
.B EXECUTE_SH
コマンドから起動できるシェルを指定します。
.IP "\fBEDITOR\fP"
ファイルの編集時に使用するエディタコマンドを指定します。
.IP "\fBPAGER\fP"
ファイルの閲覧時に使用するページャコマンドを指定します。
.IP "\fBFCEDIT\fP"
組込みコマンド
.B " fc"
で使用するエディタコマンドを指定します。
.IP "\fBSORTTYPE\fP"
ブラウザ画面のファイル一覧リストは、
デフォルトではソートしないようになっていますので、
ディレクトリ内に登録されている順に並べられています。
これを、デフォルトでソートするように定義します。
設定する値は以下のとおり。
.RS 18
.ta 0.5i 1i 2i 2.5i
.nf
\fB0\fP	ソートしない
\fB1\fP	名前順	\fB9\fP	名前順(逆順)
\fB2\fP	拡張子順	\fB10\fP	拡張子順(逆順)
\fB3\fP	サイズ順	\fB11\fP	サイズ順(逆順)
\fB4\fP	日付順	\fB12\fP	日付順(逆順)
\fB5\fP	長さ順	\fB13\fP	長さ順(逆順)
\fB100-113\fP	直前のソート形式を保持
.fi
.RE

.RS
100 〜 113 の値を設定した場合、
起動直後は下 2 桁で表される数値のソート形式になりますが、
ディレクトリ移動などの際にはデフォルトのソート形式ではなく、
その直前に指定したソート形式が保持されるようになります。
.RE
.IP "\fBDISPLAYMODE\fP"
.B fd
起動時の、
ファイル一覧リストのファイル名表示形式を設定します。
symbolic リンク表示形式、ファイルタイプシンボルの表示、
及びドットファイルの非表示を、それぞれ独立に選択できます。
デフォルトは
.B " 0"
です。
設定する値は以下のとおり。
.RS 18
.ta 0.5i 1.75i 3i
.nf
\fB0\fP	標準
\fB1\fP	SYMLINK
\fB2\fP		FILETYPE
\fB3\fP	SYMLINK &	FILETYPE
\fB4\fP			DOTFILE
\fB5\fP	SYMLINK &		DOTFILE
\fB6\fP		FILETYPE &	DOTFILE
\fB7\fP	SYMLINK &	FILETYPE &	DOTFILE
.fi
.RE

.RS
なお、ファイルフラグ対応の OS では、
これらの値にそれぞれ
.B " 8"
を加えた値を設定することで、
ファイルフラグ表示モードを選択できます。
.RE
.IP "\fBSORTTREE\fP"
ツリー表示画面でディレクトリの並びをソートするようにします。
ソートタイプは
.B " SORT_DIR"
で指定したものを用いますが、
「サイズ順」及び「日付順」になっている場合はソートできません。
また、カレントディレクトリパスに含まれるディレクトリは、
ソートタイプに関係なく常にツリー構造の先頭に来ます。
.B 0
かナル以外の値であれば、何を定義しても有効です。
.IP "\fBWRITEFS\fP"
.B WRITE_DIR
コマンドの使用を禁止します。
値を
.B " 1"
にすると、
明示的にコマンドが実行された時のみディレクトリに対して書込みを行ない、
並び替えの後に書込みの問い合わせをしてこないようになります。
値を
.B " 2"
にすると、コマンドでの実行すら無効になり、
ディレクトリの書込みが一切禁止されます。
.IP "\fBIGNORECASE\fP"
ファイル名比較の際に、常に大文字小文字の違いを無視して比較します。
.B 0
かナル以外の値であれば、何を定義しても有効です。
.B (U)
.IP "\fBINHERITCOPY\fP"
.B COPY_FILE
コマンド実行時に、
コピー先のタイムスタンプをコピー元のタイムスタンプに合わせます。
.B 0
かナル以外の値であれば、何を定義しても有効です。
.B (U)

(MS-DOS 版ではこの変数の有効無効に関わらず、
常にコピー元のタイムスタンプが継承されます。)
.IP "\fBADJTTY\fP"
.B fd
を終了する時に、端末モードを正常な状態に強制的にリセットします。
端末が文字化けするような状態を、
.B fd
を起動することで正しく調整することができます。
.B 0
かナル以外の値であれば、何を定義しても有効です。
.B (U)
.IP "\fBUSEGETCURSOR\fP"
端末サイズ取得時に、
VT100 互換のカーソル位置取得エスケープシーケンスを用います。
.B fd
の画面サイズが端末サイズと一致しないような場合は、
これを有効にすると一致することがあります。
カーソル位置取得エスケープシーケンスに対応していない端末では
処理が止まってしまうこともありますので、
このような時は、
キーボードから 'R' の文字を入力してやると復帰します。
.B 0
かナル以外の値であれば、何を定義しても有効です。
.B (U)

また、
この変数を有効にしていない場合、
.B fdsh
のコマンドラインは必ず画面最下行から始まります。
(MS-DOS 版ではこの変数の有効無効に関わらず、
常に正しくカーソル位置を取得します。)
.IP "\fBDEFCOLUMNS\fP"
.B fd
起動時の画面表示列を設定します。
デフォルトは
.B " 2"
列です。
.BR 1 ,
.BR 2 ,
.BR 3 ,
.B 5
以外の値を指定すると無視されます。
.IP "\fBMINFILENAME\fP"
ファイル一覧リスト内の、
ファイル名表示領域の最小文字数を設定します。
端末のカラム数や画面表示列によって、
ここで設定した文字数分だけの領域が確保できない場合には、
UID, GID、タイムスタンプ、サイズ、の順で情報を減じていきます。
デフォルトは
.B " 12"
文字です。
.IP "\fBHISTSIZE\fP"
.B EXECUTE_FILE
や
.B " EXECUTE_SH"
で参照できるコマンド履歴の数の上限を設定します。
デフォルトは
.B " 50"
個です。
この値が
.B " 0"
の時にはコマンド履歴参照ができません。
.IP "\fBDIRHIST\fP"
ディレクトリ入力行で参照できる
ディレクトリ履歴の数の上限を設定します。
デフォルトは
.B " 50"
個です。
この値が
.B " 0"
の時にはディレクトリ履歴参照ができません。
.IP "\fBSAVEHIST\fP"
コマンド履歴セーブファイルに保存する数の上限を設定します。
デフォルトは
.B " 50"
個です。
この値が
.B " 0"
の時にはセーブファイルを作成しません。
.IP "\fBDIRCOUNTLIMIT\fP"
ツリー表示モードで、ディレクトリ内のファイルを調べる上限数を設定します。
後ろに
.RB " '" > '
のついたディレクトリであっても、
その中にサブディレクトリが一つもなければ、
展開してもツリー構造は変化しません。
ディレクトリ内のファイル数 (ディレクトリも含む) がこの数値以内であれば、
一つもサブディレクトリを持たないディレクトリには、
最初から
.RB " '" > '
をつけません。
また、画面右に表示されるディレクトリ内ファイルの一覧も、
この数値を越えては表示しないようになります。
処理の遅いマシンでは、この値を
.B " 0"
にしておけば、
快適な処理速度が実現できます。
デフォルトは
.B " 50"
ファイルです。
.IP "\fBDOSDRIVE\fP"
MS-DOS フロッピーへのアクセス機能を有効にします。
フロッピードライブの登録がなければ、
ここで有効にしてあってもフロッピーへのアクセスはできません。
.B 0
かナル以外の値であれば、何を定義しても有効です。
.RS

MS-DOS 版では、この変数を定義しておくことにより、
Ver. 6.xx 以前の旧 DOS でも LFN 形式のファイル名を扱えるようになります。
この場合、
フロッピードライブの登録は必要ありませんが、
OS を経由せずにディスク I/O を行なうため、
アクセス速度が落ちたり幾つかの機能が制限されたりします。
.RE
.IP "\fBSECOND\fP"
タイトル行の時計に秒針を表示させるようにします。
但し、正確に時計が調整されるのは
.B " 10"
秒おきなので、
その間は実時間とのずれが生じています。
.B 0
かナル以外の値であれば、何を定義しても有効です。
.IP "\fBSIZEINFO\fP"
ファイルサイズ情報行を画面上端に表示させるようにします。
但し、ここで表示されるトータルサイズは単純にバイト数を合計したものではなく、
実際にディスクを占有しているブロックサイズ単位で合計したものになります。
.B 0
かナル以外の値であれば、何を定義しても有効です。
.IP "\fBANSICOLOR\fP"
ファイル表示をカラー化します。
使用している端末が、
ANSI 規格のカラー制御エスケープシーケンス対応している場合、
ファイルタイプに応じて色別に表示させることができます。
値を
.B " 1"
にするとカラー画面になります。
文字色が背景色と同色で区別のつかない場合、
値を
.B " 2"
にすると背景色を強制的に黒色にします。
また、
値を
.B " 3"
にすると表示色を強制的に黒色にします。
.IP "\fBEDITMODE\fP"
キー入力の編集モードを文字列で指定します。
デフォルトは
.B " emacs"
です。
.BR emacs ,
.BR wordstar ,
.B vi
以外の文字列またはナルを指定した場合、
コントロール文字は変換されずにそのまま渡されます。
.IP "\fBTMPDIR\fP"
アーカイバコマンドが、
アーカイブファイル内のファイルを一時的に伸長するための
作業ディレクトリを設定します。
デフォルトは
.B " /tmp"
です。
.IP "\fBRRPATH\fP"
ISO 9660 RockRidge 拡張に対応していない OS 用に、
CD-ROM のマウントされているディレクトリ以下のファイルを
疑似的に RockRidge 拡張して表示します。
.RB ' : '
で区切って複数のマウントポイントを指定できます。
各マウントポイントの指定は、CD-ROM がマウントされている
トップディレクトリだけを記述すれば、
それ以下のディレクトリでは全て疑似 RockRidge 拡張機能が働きます。
但し、飽くまでもこれは疑似的な拡張で、
TRANS.TBL ファイルを参照してファイル名の置換えをしているに過ぎませんので、
TRANS.TBL が不整合な一部の CD-ROM では正しく機能しません。
デフォルトではマウントポイントは一つも指定されていません。
.IP "\fBPRECEDEPATH\fP"
/dev のように数多くのファイルを抱えているディレクトリに対し、
ファイル情報を調べるより先にファイル名だけでも画面表示させてしまう
先行ファイル表示機能を指示します。
.RB ' : '
で区切って複数のパス名を指定できます。
各パス名の指定は、先行ファイル表示機能を実現させたい
トップディレクトリだけを記述すれば、
それ以下のディレクトリでは全て先行ファイル表示機能が働きます。
先行ファイル表示機能が働くと、
そのディレクトリではファイルはソートされず、
キー入力待ち状態の間に少しずつファイル情報を調べていきます。
デフォルトではパス名は一つも指定されていません。
.IP "\fBPS1\fP"
.B EXECUTE_SH
の入力ラインのプロンプト文字列を指定します。
デフォルト値は "\fB$\fP\|\ \|" です。
この文字列内には以下のエスケープ文字列が使用できます。
.RS 18
.ta 0.5i
.nf
\fB\eu\fP	ユーザ名 \fB(U)\fP
\fB\eh\fP	ホスト名 \fB(U)\fP
\fB\eH\fP	ホスト名 (ドメイン名を含む) \fB(U)\fP
\fB\ew\fP	カレントディレクトリのフルパス
\fB\e~\fP	カレントディレクトリのフルパス
	(ホームディレクトリを \fB~\fP で簡略表示)
\fB\eW\fP	カレントディレクトリ名
\fB\e!\fP	コマンド履歴番号
\fB\e$\fP	root 時のみ \fB#\fP それ以外では \fB$\fP \fB(U)\fP
\fB\e[\fP	非印字文字列の開始 (端末制御文字等)
\fB\e]\fP	非印字文字列の終了
\fB\ee\fP	ESC (\e033)
\fB\e\fP\fIooo\fR	8 進数表記 \fIooo\fR で表される文字
\fB\e\e\fP	\e 自身
.fi
.RE
.IP "\fBPS2\fP"
.B EXECUTE_SH
実行時にまだ継続して入力が必要な時のプロンプト文字列を指定します。
デフォルト値は "\fB>\fP\|\ \|" です。
.IP "\fBLANGUAGE\fP"
表示する文字の言語を指定します。
.B fd
の出力する各種メッセージの他、
漢字を含むファイル名に対するコード変換も行なわれます。
選択できる文字種は以下のとおりですが、
これらの文字列が含まれていれば判別しますので、
環境変数
.B " LANG"
の値をそのまま用いても有効です。
このうち
.BR " JIS8" ,
.B JUNET
等は Samba で用いられている漢字コードです。
.RS 18
.ta 1.5i
.nf
\fBSJIS\fP, \fBsjis\fP	Shift JIS
\fBEUC\fP, \fBeuc\fP	EUC 漢字
\fBJIS\fP, \fBjis\fP	7bit JIS
\fBJIS8\fP, \fBjis8\fP	8bit JIS
\fBJUNET\fP, \fBjunet\fP	ISO-2022-JP
\fBOJIS\fP, \fBojis\fP	7bit JIS (JIS C6226-1978 + roman)
\fBOJIS8\fP, \fBojis8\fP	8bit JIS (JIS C6226-1978 + roman)
\fBOJUNET\fP, \fBojunet\fP	ISO-2022-JP (JIS C6226-1978 + roman)
\fBUTF8\fP, \fButf8\fP	UTF-8
\fBENG\fP, \fBeng\fP, \fBC\fP	英語 (メッセージのみ)
デフォルト	変換しない
.fi
.RE

.RS
(MS-DOS 版では英語メッセージの選択のみ有効です。)
.RE
.IP "\fBINPUTKCODE\fP"
キーボード入力時の漢字コードを指定します。
これら以外の設定にすると、
コンパイル時の設定による漢字コードが採用されます。
.B (U)
.RS 18
.ta 1.5i
.nf
\fBSJIS\fP, \fBsjis\fP	Shift JIS
\fBEUC\fP, \fBeuc\fP	EUC 漢字
.fi
.RE
.IP "\fBFNAMEKCODE\fP"
ファイル名に用いる漢字コードを指定します。
ファイルアクセスを行なう時点で
ここで設定した漢字コードにコンバートされますので、
ネットワーク上の漢字コードの異なるマシンから、
漢字で書かれたファイルを参照することも可能です。
このうち
.BR " JIS8" ,
.BR JUNET ,
.BR HEX ,
.B CAP
等は Samba で用いられている漢字コードです。
.B (U)
.RS 18
.ta 1.5i
.nf
\fBSJIS\fP, \fBsjis\fP	Shift JIS
\fBEUC\fP, \fBeuc\fP	EUC 漢字
\fBJIS\fP, \fBjis\fP	7bit JIS
\fBJIS8\fP, \fBjis8\fP	8bit JIS
\fBJUNET\fP, \fBjunet\fP	ISO-2022-JP
\fBOJIS\fP, \fBojis\fP	7bit JIS (JIS C6226-1978 + roman)
\fBOJIS8\fP, \fBojis8\fP	8bit JIS (JIS C6226-1978 + roman)
\fBOJUNET\fP, \fBojunet\fP	ISO-2022-JP (JIS C6226-1978 + roman)
\fBHEX\fP, \fBhex\fP	HEX
\fBCAP\fP, \fBcap\fP	CAP
\fBUTF8\fP, \fButf8\fP	UTF-8
デフォルト	変換しない
.fi
.RE
.IP "\fBSJISPATH\fP"
.PD 0
.IP "\fBEUCPATH\fP"
.IP "\fBJISPATH\fP"
.IP "\fBJIS8PATH\fP"
.IP "\fBJUNETPATH\fP"
.IP "\fBOJISPATH\fP"
.IP "\fBOJIS8PATH\fP"
.IP "\fBOJUNETPATH\fP"
.IP "\fBHEXPATH\fP"
.IP "\fBCAPPATH\fP"
.IP "\fBNOCONVPATH\fP"
.PD
ファイル名に用いる漢字コードを、ディレクトリ単位で
.B " FNAMEKCODE"
以外のものにしたい時に指定します。
.RB ' : '
で区切って複数のパス名を指定できます。
各パス名の指定は、
その漢字コードを使用したいトップディレクトリだけを記述すれば、
それ以下のディレクトリでは全てその漢字コードのファイル名が使えます。
.B NOCONVPATH
に記述されているディレクトリでは、
.B FNAMEKCODE
の指定を無視して一切漢字コードの変換を行ないません。
デフォルトではどれもパス名は一つも指定されていません。
.B (U)
.SH 多国語対応
コンパイル時の設定により、
「EUC 漢字」と「Shift JIS」で漢字を入出力できます。
漢字を含むパス名の表示には、漢字の 2byte 目に対する考慮がされています。
入出力に関しては、
内部変数
.BR " LANGUAGE" ,
.B INPUTKCODE
及び
.B " FNAMEKCODE"
により、動的に漢字コードを選択できます。
文字列の入力では、
日本語入力フロントエンドプロセッサを用いて漢字の入力が可能です。

コマンドマクロやコマンド文字列内に漢字は使用できますが、
内部変数の値には漢字は使用できません。
.RB ' ％ '
や
.RB " '" ” '
など、2bytes 文字の記号は、
メタキャラクタなどの記号としては用いることができません。
ワイルドカードの検索では、漢字は 1 文字として見なされません。

また、
.B "%JJ"
などのパラメータマクロを用いて OS 非標準の漢字コードをシェルに渡した場合、
漢字によっては変換後のコードが
.RB " '" $ '
や
.RB " '" \e '
といった
シェルのメタキャラを含んでしまい、
期待した動作を示さないことがあります。
このような場合、大抵は
.B " %'"
で変換したい文字列部分を括ってやることで回避できます。
.SH 著者
白井 隆 <shirai@nintendo.co.jp>。
MS-DOS 用に作られたオリジナルの『ＦＤ』は、
A.Idei <SDI00544@niftyserve.or.jp> 氏によって 1989 年に
最初に作成、公開されました。
.B fd
はこのインプリメントを模して、
1995 年に UNIX 用に一から新たに作成されました。
.SH 関連ファイル
.PD 0
.TP 10
.B /etc/fd2rc
システム共通の
.B " fd"
初期設定ファイル。
.TP
.B ~/.fd2rc
個人用の
.B " fd"
初期設定ファイル。
.TP
.B ~/.fdshrc
個人用の
.B " fdsh"
初期設定ファイル。
.TP
.B ~/.fd_history
コマンド履歴のセーブファイル。
.TP
.B /bin/sh
環境変数
.B " SHELL"
が未定義だった場合のユーザシェル。
.TP
.B /bin/rm
異常終了時に不要ファイルを消去するためのコマンド。
.TP
.BR /tmp/fd \(**
アーカイブファイル伸長のための一時的ディレクトリ。
.TP
.B fd\-unicd.tbl
フロッピードライブの UNICODE 変換テーブル。
.B fd
の起動ディレクトリにインストールされる。

.TP
.B fd2rc
MS-DOS 版での共通
.B " fd"
初期設定ファイル。
.B fd
の起動ディレクトリに用意しておく。
.TP
.B $HOME\efd2.rc
MS-DOS 版での個人用の
.B " fd"
初期設定ファイル。
.TP
.B $HOME\efdsh.rc
MS-DOS 版での個人用の
.B " fdsh"
初期設定ファイル。
.TP
.B $HOME\efd.hst
MS-DOS 版でのコマンド履歴のセーブファイル。
.PD
.SH 制限事項
コマンドマクロの展開後のサイズは
.B " 1023"
文字までに制限されています。
文字列の入力は、画面サイズにも依存しますが、
.B 255
文字を越えては入力できません。

登録できるキー割当ては
.B " 256"
個までです。
このうち、ユーザ定義マクロで割当てられるのは
.B " 64"
個までです。
登録できるランチャは、アーカイブブラウザの登録を含めて
.B " 32"
個までです。
登録できるアーカイブコマンドは、圧縮と伸長を一組として
.B " 16"
組までです。
これらの上限値には、最初から組込み定義されているものを含みます。

端末の種類によって、
一部のファンクションキーや特殊キーの入力ができないことがあります。
.BR termcap (5)
に登録されていない機能のデフォルトシーケンスは、
.B VT200
互換のシーケンスを採用していますが、
端末がこれに対応できていない場合は、
その機能を用いたキーの取得や画面制御ができません。
.SH 関連事項
.BR echo (1),
.BR test (1),
.BR ls (1),
.BR rm (1),
.BR tar (1),
.BR compress (1),
.BR zcat (1),
.BR gzip (1),
.BR gunzip (1),
.BR lha (1),
.BR login (1),
.BR newgrp (1),
.BR umask (2),
.BR termcap (5),
.BR terminfo (5)
.SH バグ
アーカイブファイル内に ".\|." を含んだパス名で圧縮してある場合は、
アーカイブブラウザが正常に働きません。
アーカイブファイル内の symbolic リンクは個別に展開できません。

ユーザインタフェースが稚拙です。
.SH 著作権
Copyright (C) 1995-2002 by Takashi SHIRAI
