[βテストの確認項目]

　FDclone-0.99のβテストでは、正式公開に向けて以下のチェック
をしようと思っています。みなさまのご協力を期待しています。


1.動作環境の拡大

　現在、SunOS4.1.x, NEWS-OS 4.2.x, HP-UX 9.x, IRIX R4.2 での
動作チェックが完了しています。しかし、それ以外の OS では、コ
ンパイルオプションの指定すらままなりません。
　machine.h の記述を見て貰うとお判りだと思いますが、できるだ
け多くの OS で、「make 一発」という環境を構築したいと考えて
います。

　行なって頂きたいことは、まず何も手を加えないでコンパイルし
てみて、どのようなエラーが出るかを確認し、そのエラーに応じて
machine.h の該当箇所のコメントアウトを解除するという作業です。
　多分、OS に依存するものはここにある定数定義で吸収できてい
ると思いますが、そうでない場合は、新たに識別子を増やす必要が
あります。
　まずはとにかく、コンパイルできるようにあれこれ手を加えてみ
て下さい。

　加えて、コンパイル時にその OS 特有の識別子が定義されると思
いますので、お使いの環境での識別子 (例えば SunOS なら "sun")
を確認して下さい。
　これがないと、その OS への対応法が判っても、OS の判別がで
きないために「make 一発」という訳には行きませんから。


2.挙動のチェック

　コンパイルが無事済んだら、一通り主だった機能を使用してみて
下さい。man ページには簡単にしか書いてありませんが、様々なケ
ースに対応できるようにかなり神経質な仕様になっています。
　その弊害で、「考え過ぎ」みたいなアラが出ているかも知れませ
ん。発見した不具合は、どんな些細なことでも構いませんからご一
報下さい。関数名のスペルミス程度のあら探しでも構いません。

　作者としては、メモリ管理に多少不安が残っています。仕様済み
領域の解放忘れとか、確保した範囲を越えてのメモリアクセスとか、
メモリ関係のバグは思わぬところでしか表面化しませんので、でき
るだけ注意深く監視して下さい。
　この手のバグは、Segmentation Fault につながることが多いの
で、そういうハングアップの仕方をしたとしたら、まずメモリ管理
絡みを疑ってかかって下さい。
　報告の際には、その前後の状況や再現性の有無なども詳しくお願
いします。

　日本語の処理関係もまだ甘いかも知れません。


3. OS 依存性のチェック

　OS によって、コンパイルはできたけど不都合がある場合があり
ます。例えばキーコードやファイルシステムの特殊性など。これら
を確認するために、2 つのプログラムを用意してあります。

　"make getkey" とすると、getkey という名のコマンドができ上
がります。このコマンドを実行すると、キーボードからの入力を、
キーコードのシーケンスにして出力します。
　これで確認すべきことは、ESC コードを冠するキーのシーケンス
を正しく認識できるかどうかです。
　ファンクションキーや特殊キーを押した場合には ESC のコード
に続いて数個のキーシーケンスが続きます。fd では、ESC の後に
360 ms 待って、後続のコードが来なければ ESC そのものの入力と
見なしています。
　但し、この数値は作者周辺の環境で色々確認してみた際の値です
ので、絶対的な根拠は何もありません。この値でうまく動かない環
境があるようであれば、ご報告お願いします。
　「このキーがこういうシーケンスを吐くので対応させて欲しい」
という要望も飲みます。

　"make test" とすると、カレントディレクトリでファイルシステ
ムの構造についてのチェックを行ないます。
　ディレクトリの書込み機能に関するチェックですが、ファイルシ
ステムの構造は完全に OS の管理下にあるので汎用性を保てません。
エラーらしき文字列が出力された場合は、報告をお願いします。
　このプログラムでは、カレントディレクトリ下のテスト用ディレ
クトリにランダムにファイルを作成し、それを並び替えているだけ
ですが、ディレクトリファイルの構造は動的に対応するようにして
あります。
　このプログラムで対応できないような、新しい形式のファイルシ
ステムの OS で実験すると、きちんと並び替えが行なわれないはず
です。
　エラーが出た場合、machine.h の IRIXFS を定義してみて下さい。
SGI の IRIX と同等のファイルシステムを用いている OS が他にも
あるかも知れません。
　これは BSD から見るとかなり特殊な構造なのですが、NSG の方
に聞いた限りでは、「SVR4 の規格そのものだ」と仰ってました。
SVR4 系の OS の方は特に注意願います。


4.エラーが生じた場合の対応

　fd は執拗なくらいにエラーをチェックしてしまっているので、
実際大した問題ではないのに、エラーメッセージを出して終了して
しまうことがあるかも知れません。
　ユーザの不注意によるミスが原因の場合には、できるだけウォー
ニングにとどめようと思っていますので、「これでアボートされて
はたまらない」といった仕様上の問題点はどしどし報告して下さい。

　逆に、エラー扱いしてくれないと困る、といった注文の方も、宜
しくお願いします


5.仕様に対する注文

　実行する前に確認を入れろとか、このキーバインドはおかしいと
か、その他何でも構いませんから、使用上不都合に感じる仕様があ
りましたら、バグではなくてもご報告下さい。
　生意気にも、作者としては「かゆいところに手が届く」ツールを
目指していますので、「かゆいところ」の報告は歓迎します。でき
る限り全ての「かゆいところ」に手が届くよう、みなさんご協力下
さい。


6.その他何でも

　とにかく、言いたいことがあれば何でも言ってみて下さい。ちょ
っとしたことから活気的なアイデアが発生して、使い勝手が格段に
向上することもあります。
　初心者向けのツールとして考えていますので、プログラマレベル
の人間にとっては些細な問題でも、初心者には致命的なこともあり
ます。そういう問題は、できるだけ初心者側のスタンスに立ってク
リアしておきたい。
　ですから、fd の評価は可能な限りわがままな気持ちで行なって
もらって良いと思っています。


--
　以上、多岐に渡る雑多な確認項目ではありますが、みなさんの理
解あるご協力を得られたらと考えております。是非とも、宜しくお
願い致します。


追記: ソースに手を加える際の注意点

　最後に修正された時刻から、日付をまたがった時刻にソースを修
正した場合、version.h のリビジョン番号を自動的にインクリメン
トするように Makefile.in に記述してあります。
　"make tar" で、リビジョン毎に異なった名前のアーカイブを作
りますので、ある程度はこの機能を用いてバージョン管理してみて
下さい。
