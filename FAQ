[FDclone に関する Q&A 集]


<1.UNIX 依存の話>

Q1-01.	長いファイル名が最後まで表示されないのですが？
A1-01.	デフォルトのキー割当てでお使いの場合、[(],[)] のキー
	でファイル名の表示部分を少しずつずらしていくことがで
	きます。お目当てのファイルにカーソルを合わせ、[)] を
	何度か押していけば、最後まで表示されるでしょう。

Q1-02.	FDclone を終了した後に、必ず起動時のディレクトリに戻
	されてしまうのですが、何とかならないでしょうか？
A1-02.	UNIX という OS では、カレントディレクトリという概念
	はプロセス毎に別個に持っていて、特に子プロセスでの変
	更を親プロセスに反映させる手段はありません。
	FDclone はユーザシェルの子プロセスとして起動されます
	から、FDclone がどう頑張ったところで、親プロセスであ
	るユーザシェルのカレントディレクトリは変更できません。

Q1-03.	Shift + ↑, ↓でページ切替えがしたいのですが。
Q1-04.	Shift + Ret でエディタの起動や実行ファイルの起動をし
	たいのですが。
Q1-05.	Shift を押した時にファンクション行の表記が変わらない
	のですが。
A1-03.
A1-04.
A1-05.	UNIXでは、キーボード入力の取得は、ホストと端末間の通
	信によって行ないます。どういうコードを送受するかは、
	端末エミュレーションソフトや端末そのものの規格によっ
	て決められています。
	一般の端末では、Shift そのものはキーコードを送信しま
	せん。他のキーが押された時に初めて、そのキーの Shift
	用のコードが送信されます。
	つまり、Shift キーと併用してキーコードが変わるキーで
	なければ、Shift キーを押しているかどうかは判断できま
	せんし、どのキーがそういう仕様かは端末側が決めていま
	す。
	そして一般に、Ret やカーソルキーは Shift 押下の影響
	を受けずに同じ信号を送信します。

Q1-06.	アーカイブブラウザ内のオーナー名やグループ名がおかし
	な表示になります。
Q1-07.	フロッピードライブを参照すると、オーナー名やグループ
	名がおかしな表示になります。
A1-06.
A1-07.	ファイルの持つオーナー名やグループ名というものは、そ
	のマシンの中だけで意味を持ちます。別のマシンから見た
	場合には、同一のオーナー名やグループ名を意味している
	保証はありません。
	アーカイブされたファイルに保存されたオーナー名やグル
	ープ名は、それをアーカイブしたマシンでつけられたもの
	です。
	フロッピードライブのファイルには、MS-DOS にはそうい
	うファイル属性がないために、オーナー名やグループ名が
	存在しません。
	こういう場合には、ファイルのオーナー名やグループ名が
	実在のユーザやグループを指しません。これは、オーナー
	名やグループ名が数値として表されるように UNIX が実装
	されている以上、どうしようもないことだと思って下さい。


<2.カスタマイズの話>

Q2-01.	ファイルの拡張子によって外部コマンドを起動させたいの
	ですが、ユーザカスタマイズはできますか？
Q2-02.	キー割当てを変更したいのですがどうしたらいいですか？
A2-01.
A2-02.	ホームディレクトリにある .fdrc を環境設定ファイルと
	して使って下さい。書式詳細については、man ページのマ
	ニュアルを参照して下さい。

Q2-03.	キー割当てできないキーがあるのですが。
A2-03.	キー割当ての変更可能な特殊キーは、man ページのマニュ
	アルにある特殊キー識別子の用意されたものだけです。し
	かし、組込みコマンド keymap を利用して、他の機能キー
	の代用をさせてしまうことで、疑似的にキー割当て可能で
	す。
	コントロール文字のキー割当てについては、編集モードに
	よる代替キー機能が優先しますので、編集モードによって
	はキー割当てできないコントロール文字が存在します。ど
	うしても割当てたい場合には編集モードを変更する必要が
	あります。
	また、妙な変更をしてしまって FDclone から抜け出せな
	くなることを防止するため、ESC のキー割当て変更は禁止
	しています。

Q2-04.	ファンクションキーの表示が実際のキーボードと合わない
	のですが。
A2-04.	キー割当ての変更機能で、ファンクションキーのキー割当
	てを変更する際に、ファンクション行の該当位置の表示を
	変更できます。詳細は man ページを参照して下さい。
	但し、キーボードについているファンクションキーの並び
	方がファンクション行と異なるような場合、これをキーボ
	ードの側に合わせることは、残念ながらできません。悪し
	からず。

Q2-05.	どういう風にカスタマイズされたかを確認したいのですが。
A2-05.	EXECUTE_SH コマンドにある組込みコマンドで確認できま
	す。例えば、キー割当てならば printbind、内部変数定義
	ならば printenv です。詳しくは man ページを参照して
	下さい。

Q2-06.	システム管理者として、ユーザ共通の環境設定ファイルを
	用意したいのですが。
A2-06.	/etc/fdrc というファイルを作って下さい。.fdrc の有無
	に関わらず、こちらを参照した後ユーザの .fdrc を参照
	します。

Q2-07.	新しいアーカイブ形式をアーカイブブラウザに登録したい
	のですが、どう登録すれば良いでしょう？
A2-07.	TECHKNOW の項目 5 で詳しく解説していますので、マニュ
	アルの「アーカイブブラウザ」の項と共に参照して下さい。

Q2-08.	常にソートされてしまいます。
Q2-09.	シンボリックリンクはリンク先の情報を見たいのですが。
Q2-10.	ファイル名の後ろに '*' や '/' といった文字がついてし
	まいます。
Q2-11.	'.' で始まるファイルが表示されません。
Q2-12.	ツリー画面でソートしたいのですが。
Q2-13.	ディレクトリ書込み機能が効きません。
Q2-14.	終了後に起動前と異なった端末設定になってしまいます。
Q2-15.	起動時の列数を変更したいのですが。
Q2-16.	ファイル名フィールドをもっと長く取れませんか？
Q2-17.	ヒストリ機能が使えません。
Q2-18.	パス名の入力に履歴参照できませんか？
Q2-19.	ヒストリを次回の起動まで持ち越したいのですが。
Q2-20.	ツリー表示モードでファイル一覧が一部しか表示されませ
	ん。
Q2-21.	時刻表示で秒を出せませんか？
Q2-22.	ファイルサイズ合計やディスク容量を知りたいのですが。
Q2-23.	カラー画面になりませんか？
Q2-24.	EXECUTE_SH モードでのプロンプトを替えたいのですが。
A2-08.
A2-09.
A2-10.
A2-11.
A2-12.
A2-13.
A2-14.
A2-15.
A2-16.
A2-17.
A2-18.
A2-19.
A2-20.
A2-21.
A2-22.
A2-23.
A2-24.	これらの設定は、内部変数や環境変数で設定します。ユー
	ザ側で意図的に設定する以外に、システム管理者がユーザ
	共通の設定ファイルを用意している場合や、コンパイル時
	に埋め込んでいる場合もあります。マニュアルの「環境変
	数」の項を良く読んで、.fdrc などで自分に合った環境に
	設定しましょう。
	また、管理者の人は、ユーザがこのような困惑を抱かない
	ように、適切な共通設定ファイルを用意すべきです。配布
	パッケージ添付の設定ファイルは飽くまでも一例に過ぎま
	せんから、熟考した上で共通設定ファイルを作成して下さ
	い。

Q2-25.	編集モードのことが理解できません。
A2-25.	emacs や vi を使ったことのない人にとっては、コントロ
	ール文字による代替キーの割当て方式が何故複数用意され
	ているのかが理解しづらいところだと思います。
	オリジナルの『ＦＤ』に合わせたい場合は、何も考えずに
	内部変数 (または環境変数) EDITMODE に wordstar を定
	義して下さい。
	特に、vi モードについては、vi に慣れ切ってしまってい
	る人以外にとっては混乱するだけの環境だと思いますので、
	よほどのことでもない限りは設定しない方が良いでしょう。

Q2-26.	アーカイブブラウザ内のファイルを参照しようとすると、
	"No such file or directory" と言われて拒否されます。
Q2-27.	フロッピードライブ内のファイルを参照しようとすると、
	"No such file or directory" と言われて拒否されます。
A2-26.
A2-27.	内部変数 (または環境変数) TMPDIR に定義されている内
	容は正しいでしょうか？ここで定義されている名前のディ
	レクトリが存在するだけでなく、そのディレクトリがユー
	ザにとって書込み可能でなくてはなりません。
	定義してあるディレクトリ名を変えるか、そのディレクト
	リのアクセス権を変更してみて下さい。

Q2-28.	フロッピードライブ機能が使えません。
A2-28.	フロッピードライブに関する設定が有効になっていますか？
	コンパイル時に設定していなくても後からカスタマイズが
	可能です。
	内部変数 (または環境変数) DOSDRIVE を有効にし、かつ
	フロッピードライブの登録を行なわなくてはいけません。
	詳細は TECHKNOW の項目 6 を参照して下さい。
	また、フロッピードライブ用に指定されているデバイスフ
	ァイルの許可モードによっては、一般ユーザではフロッピ
	ードライブが使えないことがあります。この場合はマシン
	の管理者に聞いてみて下さい。

Q2-29.	システム共通の設定ファイルは、どうして /usr/local の
	下に置かないのですか？
A2-29.	/usr/local は NFS により複数のマシンで共有しているケ
	ースが割と多く見かけられます。このような環境下で、シ
	ステム共通の設定ファイルを /usr/local 下に置いてしま
	うと、複数のマシンで同一の設定ファイルを用いることに
	なってしまいます。
	FDclone の各種設定には、マシン固有の要因も少なくなく、
	このように複数のマシンで同一の設定ファイルを用いるの
	は好ましくない場合も多いと思います。
	そのため、一般的に NFS を用いることの少ない /etc 下
	に置くように設計されています。
	但し、以上のような点を理解した上で、尚且つ /usr/local
	下に置きたいという場合は、Install にも書かれているよ
	うに、Makefile.in の DEFRC の項目を書き換えてインス
	トールして下さい。

Q2-30.	システム共通の設定ファイルはどういうものを用意したら
	良いのでしょう？
Q2-31.	環境設定ファイルに何を書いてよいかわかりません。
A2-30.
A2-31.	システム共通の設定ファイル /etc/fdrc にしても、ユー
	ザ単位の設定ファイル .fdrc にしても、必ず用意しなく
	てはいけないものではありません。
	これらを用意しなかった場合、実行ファイルに埋め込まれ
	たデフォルトの設定が有効になりますが、これとて各 OS
	環境の差異を考慮の上での設定ですので、大抵の場合、そ
	のままでも正常に動作するはずです。
	むしろ、勝手のわからないまま妙な設定ファイルを作成し
	てしまったり、添付のサンプルをそのまま利用してしまっ
	たりすると、却って支障を生じる場合がありますので、無
	意味に設定ファイルを用意することは避けた方が賢明でし
	ょう。


<3.動作環境の話>

Q3-01.	ファイルの中身を参照しようとした場合、ページ制御がう
	まくいかなかったり、binary だと画面が崩れてしまった
	りします。
A3-01.	それは閲覧ソフトの仕様によります。内部変数 (または環
	境変数) PAGER に対して定義した閲覧ソフトを変えれば、
	参照時の問題はクリアされるでしょう。
	FSF が配布している GNU less などがお奨めです。

Q3-02.	特殊キーやファンクションキーを押しても反応しません。
Q3-03.	DEL キーと BS キーの挙動がおかしいのですが。
A3-02.	
A3-03.	特殊キーやファンクションキーの吐くキーコードが期待し
	たものと異なるのでしょう。termcap や terminfo のマニ
	ュアルを見て、端末に合ったエントリを登録し直しましょ
	う。
	termcap や terminfo を操作できない場合は、組込みコマ
	ンド keymap による設定でキーコードを動的に変更可能で
	す。組込みコマンド getkey で該当キーのキーコードを調
	べて登録しましょう。
	また、端末によっては、ファンクションキーを押してもキ
	ーコードを送出せずに、代わりに画面コピーなどの動作を
	するものもあります。そのような端末では、ファンクショ
	ンキーを使用することはできません。

Q3-04.	"Column size too small" とメッセージが出て終了してし
	まいました。
A3-04.	端末の横方向の文字数が少な過ぎて、FDclone の表示に支
	障が出るために強制終了したということです。同様に、縦
	方向が小さいと、"Line size too small" となります。
	もっと大きな端末で起動するか、もしくはウィンドウ端末
	などサイズ可変の場合は 80x8 以上のサイズまで広げてか
	ら起動して下さい。
	サイズ可変端末の場合、起動中にサイズを小さくすると、
	作業中であっても終了してしまうことがありますので、気
	をつけて下さい。

Q3-05.	漢字が文字化けしてしまって読めません。
A3-05.	コンパイル時の漢字コードが違うか、もしくは漢字コード
	の異なる端末で起動してしまったためでしょう。
	後者の場合、内部変数 LANGUAGE に、sjis, jis, euc の
	どれかを端末に応じて指定して下さい。FDclone 内部でコ
	ード変換します。
	前者の場合、本来の漢字コードに直してコンパイルし直す
	必要がありますが、対処療法として後者と同じことをして
	も構いません。但しこの場合、漢字ファイル名のファイル
	や日本語 man ページの参照の際に不具合が生じると思い
	ます。

Q3-06.	違う環境のマシンに持っていって実行したらおかしくなっ
	てしまいました。
A3-06.	一般に、環境が異なればコンパイルし直すのが原則です。
	一見同じように見えても、OS バージョンの違いや設定の
	違いのために、動作はできても何らかの不都合が生じるで
	しょう。
	また、別の環境でコンパイルし直す時は、以前の作りかけ
	のファイルが残らないように、"make clean" を実行して
	からコンパイルすることを忘れないで下さい。

Q3-07.	make config したのですがちゃんとコンパイルできません。
A3-07.	環境の自動判定は完璧ではありませんので、TECHKNOW の
	項目 1 を見ながら、手作業で config.h を修正して下さ
	い。多少の C 言語の知識は必要としますが、各 man ペー
	ジを参照しながら修正すれば高度な知識は必要ないでしょ
	う。
	また、Install の中で対応 OS と唱われている OS を使っ
	ている場合は、make config を行なうと却って不適切な設
	定になってしまう場合もあるので、make config はしない
	で下さい。誤って行なってしまった場合は make clean を
	実行しましょう。
	なお、未対応 OS に対する config.h の設定ができた場合、
	作者まで連絡下されば、次回のリリースでは対応 OS とし
	て登録される場合もあります。
	但し、作者の所持しない環境については基本的にサポート
	不可能なので、config.h の修正でも不完全だった場合に
	は諦めて下さい。ハード込みで作者まで開発環境を用意し
	て頂けるようならサポートしますが。

Q3-08.	man fd を実行してもマニュアルが正しく出ません。
A3-08.	マニュアルが正しくインストールされていない可能性があ
	ります。Makefile.in で指定した MANDIR は用意されてい
	るでしょうか。
	もしくは漢字コードにまつわる設定不備も考えられます。
	ユーザ環境で MANPATH や LANG といった環境変数が正し
	く設定されているかどうかを確認しましょう。
	最悪のケースとしては、OS が日本語対応でないという場
	合も考えられます。端末自体は日本語を表示可能であって
	も、テキストフォーマッタ (大抵は nroff) が日本語を正
	しく扱えないという場合もあります。
	その場合は、Install の項目 8 に従って、プレーンテキ
	スト版のマニュアルをインストールして下さい。

Q3-09.	アーカイブブラウザでファイルのタイムスタンプだけが正
	しく表示されません。
A3-09.	FDclone を抜けて手動で "tar tvf <ファイル名>" を実行
	してみて下さい。日付や時刻が日本語で表示されていませ
	んか？
	そのような書式のタイムスタンプは正しく認識できないの
	で、.fdrc などで "export LANG=C" を実行し、英語モー
	ドで tar を実行するようにして下さい。
	また、アーカイブブラウザ登録が間違っていることも考え
	られますので、TECHKNOW の項目 5 やマニュアルの「アー
	カイブブラウザ」の項を良く読んでみましょう。

Q3-10.	ファイル表示で最後まで読めません。
A3-10.	OS 組込みの標準コマンド more など、一部の閲覧ソフト
	を用いている場合には、ファイルの最後まで読み切った時
	点ですぐに FDclone に戻ってしまい、最後まで読めない
	場合があります。
	このような場合には、戻る前に一旦キー入力待ちを行なう
	ように、"%K" マクロを用います。具体的には、内部変数
	(または環境変数) PAGER を設定している箇所で、閲覧ソ
	フト名の後ろに "%K" の 2 文字を追加して下さい。

Q3-11.	漢字コードが違うファイルを読みたいのですが。
A3-11.	漢字コードの変換は閲覧ソフトの行なう作業なので、閲覧
	ソフトの側で工夫するしかありません。GNU less には、
	各漢字コードを自動認識する iso-2022 patch があります
	ので、各 anonymous ftp サイトで探してみて下さい。
	また、nkf など自動認識型の漢字コードフィルタも幾つか
	存在します。これらを用いて、内部変数 (または環境変数)
	PAGER に "nkf %C | less" などと設定しておくのもまた
	一つの手です。

Q3-12.	.lzh ファイルのブラウザ表示がある日突然おかしくなっ
	ていまいました。
A3-12.	UNIX 版 LHa は、V 1.14 からリスト表示形式のフォーマ
	ットが変更されてしまいました。以下のランチャ登録を行
	なって下さい。
	launch ".lzh" "lha -lq" 0,0:1,2-'/',2'/',3,7,5,6,7,8

Q3-13.	IRIX の winterm 端末で実行すると、Ret キーやカーソル
	キーが効きません。
A3-13.	標準で用意されている winterm 用の terminfo の記述が
	誤っているのが原因です。
	以下の記述を /etc/fdrc.iris-ansi に加えておくと良い
	でしょう。
		keymap	ENTER	""
		keymap	UP	"¥033OA"
		keymap	DOWN	"¥033OB"
		keymap	RIGHT	"¥033OC"
		keymap	LEFT	"¥033OD"
	補足的に解説しておきますと、ここにある ENTER という
	のは、特殊キーの Enter キーを指し、Ret キー (いわゆ
	る改行キー) のことではありません。
	キーボードの Ret キー (多くの場合右シフトの上) のキ
	ートップに Enter と刻印のあるものもありますが、ここ
	で言う Enter キーとはこれとは異なり、一部のキーボー
	ドに用意されている特殊キーのことです。送信キーと呼ば
	れることもあります。
	IRIX の実装上この混同が生じたことが、この支障の現況
	だと思われます。

Q3-14.	BSD on Windows 1.5 でコンパイルしたのに、FreeBSD だ
	と見なされてしまって、漢字コードが ShiftJIS ではなく
	EUC になってしまいました。
A3-14.	BSD on Windows 1.5 のインストーラに支障があり、プリ
	デファインされるべき識別子が定義されていないのが原因
	です。
	以下のファイルをコピーして下さい。
	コピー元:("X" は BOW CD-ROM のあるドライブ名)
	/dfs/X/usr/local/lib/gcc-lib/i386--freebsd/2.6/specs
	コピー先:
	/usr/local/lib/gcc-lib/i386--freebsd/2.6.2/specs


<4.仕様の話>

Q4-01.	パス名の履歴を保存できませんか？
A4-01.	Ver 1.03 よりパス名履歴を追加しましたが、これは入力
	ラインの履歴ではなく、ディレクトリ操作系コマンドの履
	歴となっています。その性質上、次回の FDclone 実行ま
	で持ち越すべきものでもなく、また保存ファイルの管理等
	面倒な問題も生じるので、パス名履歴は保存しない仕様に
	してあります。

Q4-02.	INFO_FILESYS コマンドで、値が "?" となってしまうこと
	があるのですが。
A4-02.	OS 側の仕様で、ファイルシステム情報が得られないよう
	な場合があります。その場合は "?" と表示されますが、
	これは OS 側の都合でそうなっているので、FDclone には
	どうしようもありません。

Q4-03.	ディレクトリにもマークできるようにはなりませんか？
A4-03.	ディレクトリへのマークを許してしまうと、ユーザが操作
	を間違えてしまった場合のダメージが大きくなってしまい
	ます。安全策をとって、ディレクトリへのマークは禁止し
	ています。
	なお、オリジナルの『ＦＤ』でもそういう仕様になってい
	るはずです。

Q4-04.	検索指定文字列に "*" を選んだところ、'.' で始まるフ
	ァイルが除外されてしまいました。
A4-04.	UNIX のシェルでは、'.' で始まるファイルはワイルドカ
	ードにマッチしないようになっています。FDclone でもそ
	の仕様に合わせました。
	因みに、一般には、'.' で始まるファイルにマッチさせる
	には、".??*" という文字列で検索します。
	また、DOTFILE_MODE コマンドで '.' で始まるファイルを
	非表示にしていないかどうかも確認して下さい。

Q4-05.	Ver.1.03 にバージョンアップしたところ、これまでと設
	定が全然変わってしまいました。
A4-05.	Ver.1.03 から、EXECUTE_SH や .fdrc で用いる組込みコ
	マンドの書式に大きな仕様変更が施されました。Ver.1.02
	以前の .fdrc はそのままでは使用できませんので、マニ
	ュアルや _fdrc.dif 等を参考にして書き換えて下さい。

Q4-06.	バグがみつかりました。
A4-06.	下記のアドレスまで mail でレポートして下さい。
		<shirai@nintendo.co.jp>
	対処法がわかれば次のバージョンから Bugfix します。

Q4-07.	ソートするとディレクトリだけ必ず先に来てしまうのです
	が。
Q4-08.	ツリー表示モードにすると、ソートするように設定しても
	カレントディレクトリが必ず先頭に来てしまいます。
A4-07.
A4-08.	そういう仕様にしてあります。


<5.その他>

Q5-01.	ソースを失ってしまいました。
A5-01.	現在確認されている anonymous ftp 先は下記のとおりで
	す。そちらから入手して下さい。

	ftp://skylark.ics.es.osaka-u.ac.jp/pub/FDclone/
	ftp://imasy.or.jp/pub/unix/util/fd/

Q5-02.	FAQ に載っていない質問があるのですが。
A5-02.	本当ですか？FDclone リリース後に寄せられた質問 mail
	のうち 90% 以上が、同梱のドキュメントに記載されてい
	ることで、しかもそのうちのほとんどが、この FAQ にあ
	るとおりの質問内容でした。
	知らないことを他人に聞くことは悪いことではありません
	が、できる限りのことは自分でやるというのが Internet
	を支える互助精神です。
	質問 mail を書く前に、もう一度ドキュメント類を読み返
	してみましょう。その上で、どうしてもわからないことが
	ある場合は、遠慮なく問い合わせの mail を送って下さい。
